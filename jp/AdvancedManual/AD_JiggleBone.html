<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <!-- 제목 -->
        <title>ジグルボーン</title>
        <!-- 파비콘 -->
        <link rel="shortcut icon" href="../../Images/favicon.ico"/>
        <!-- 부트스트랩 -->
        <link rel="stylesheet" href="../../css/bootstrap.css">
        <!--------------->

    </head>

    <body>
        <p>
            <nav class="navbar fixed-top navbar-expand-lg navbar-dark bg-dark">
            <!--로고 : AnyPortrait 홈페이지로 가야한다. (언어별)-->
            <a class="navbar-brand" href="https://www.rainyrizzle.com/anyportrait-jp">
                <img src="../../Images/AP_Logo.png" width="150" height="30" class="d-inline-block align-top" alt="">
            </a>

            <!--메뉴들 : 현재 페이지의 카테고리에 active 붙인다. (언어별 링크) -->
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarText">
                <ul class="navbar-nav mr-auto">
                <li class="nav-item">
                    <a class="nav-link" href="../../jp/GettingStarted.html">入門ガイド</a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="../../jp/AdManual.html">マニュアル</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="../../jp/Script.html">スクリプト</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="https://www.rainyrizzle.com/ap-videotutorial-jp">ビデオ</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="https://www.rainyrizzle.com/ap-forum">フォーラム</a>
                </li>

                </ul>

                <!-- 언어 변경. 현재 페이지의 주소에서 언어 주소만 변경한다. (해당 언어에 active) -->
                <div class="btn-group mr-2" role="group" aria-label="Basic example">
                    <a role="button" class="btn btn-secondary" href="../../en/AdvancedManual/AD_JiggleBone.html">EN</a>
                    <a role="button" class="btn btn-secondary" href="../../kr/AdvancedManual/AD_JiggleBone.html">KR</a>
                    <a role="button" class="btn btn-secondary active" href="../../jp/AdvancedManual/AD_JiggleBone.html">JP</a>
                </div>

                <!-- 여백 -->
                <p></p>

                <!-- 검색버튼 -->
                <form class="form-inline">
                    <a class="btn btn-light" role="button" href="../../jp/Search.html">サーチ</a>
                </form>
            </div>
        </nav>
    </p>

    <!-- 실제 바디 부분 -->
    <div class="container">
    <br>
    <br>
    <!-- 여기에 내용을 적어주세요 -->

    <!-- 여기서부터 페이지 내용이 작성됩니다. -->
    <!-- 1. 페이지 진입 경로 -->
    <p><a href="https://www.rainyrizzle.com/anyportrait-jp"><span class="text-dark">AnyPortrait</span></a> > <a href="../../jp/AdManual.html"><span class="text-dark">マニュアル</span></a> > ジグルボーン</p>
    
    <!-- 2. 페이지 메인 타이틀 -->
    <h1 class="display-5">ジグルボーン</h1>
    <br>
    
    <!-- 4. 버전 설명 -->
    <h4><span class="badge badge-secondary">1.4.0</span></h4>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_946.jpg"/>
    <br>
    
    <p>
    <strong>「ジグルボーン（Jiggle Bone）」</strong>は、物理的な効果が追加され、実際のと同じように動く骨を指します。<br>
    特に、AnyPortraitは「慣性」と「空気抵抗」による物理的な効果が適用されたジグルボーンをサポートします。<br>
    AnyPortraitでは「ジグルボーン」または「ジグル骨」と表記して同じ機能を指します。<br>
    </p>
    <br>
    
    <p>
    AnyPortraitの「ジグルボーン」には、次のような特徴があります。<br>
    - リアルタイムでの骨のエンドポイントの位置を検出し、抵抗力と慣性を計算します。<br>
    - 「ヘルパー骨（Helper）」や長さが0である、骨は「ジグルボーン」が動作しません。<br>
    - 「Unityシーンでの位置の変化」と「アニメーションによる位置変化」によって、この機能が動作します。<br>
    - アニメーションに基本的な形を作って「ジグルボーン」を設定すると、さらにクオリティが向上します。<br>
    - 重力は適用されません。重力を表現したい場合は、「重力が適用された場合の形状」をアニメで作成した後「ジグルボーン」を適用します。<br>
    - IKチェーンが設定される必要はなく、1つの骨にも適用できます。<br>
    - スクリプトを利用して、apPortraitの物理動作を無効にするか(SetPhysicEnabled(bool))、Importantオプションがオフの場合には、この機能が動作しません。<br>
    - 連続した骨を対象に「ジグルボーン」を適用すると、相対的により敏感に揺れる傾向があります。<br>
    - AnyPortraitエディタの性能に応じて、シミュレーションの結果が多少不正確になることができます。 Unityシーンでテストを試みることをお勧めします。<br>
    - 画面キャプチャ機能で映像を録画するとき、物理的な効果をオンにすると「ジグルボーン」が適用された状態で録画がされます。ただし、Unityシーンでの動作とは多少異なる場合があります。<br>
    - 物理衝突による動きは演算されません。<br>
    </p>
    <br>
    
    <p>
    このページは、上の画像のように「長い髪が自然に動くキャラクター 」を「ジグルボーン」を利用して、簡単かつ迅速に作成する方法を説明します。<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_947.jpg"/>
    <br>
    
    <p>
    <strong>(1)</strong> メッシュグループを選択します。<br>
    <strong>(2)</strong> 「Boneタブ」を選択します。<br>
    <strong>(3)</strong> 「ジグルボーン」を適用しようとする骨を選択します。<br>
    <strong>(4)</strong> 「Jiggle Boneボタン」を押してON状態に切り替えます。<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_948.jpg"/>
    <br>
    
    <p>
    「ジグルボーン」の設定を有効にすると上記のように属性が表示されます。<br>
    <strong>1. Mass</strong> : 質量です。値が大きくなるほど動きが鈍くなって重くなります。<br>
    <strong>2. K-Value</strong> : 元の形に戻ろう属性です。値が大きくなるほど速く弾力的に復元されます。<br>
    <strong>3. Air Drag</strong> : 空気抵抗を受ける程度で0から1の間の値を持ちます。値が大きいほど、外部の動きに敏感で大きく動きます。この値に基づいて「ジグルボーン」の効果の全体的な適用程度が決定されます。<br>
    <strong>4. Damping</strong> : 減衰力です。この値が大きいほど、揺れる時間が短くなって急速に元の形に復元されます。 K-Valueとは異なり、この値が大きければ弾性が減少します。<br>
    <strong>5. Constraint ON/OFF</strong> : 揺れる角度を制限することができます。制限しない場合は-180〜+ 180度の間の値に「ジグルボーン」が適用されます。<br>
    <strong>6. Reset Valueボタン</strong>：「ジグルボーン」の属性値を初期化します。<br>
    <strong>7. Testボタン</strong>：このボタンを押すと、すべての「ジグルボーン」に同じ任意の力がかかります。属性の値をテストすることができます。<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_949.jpg"/>
    <br>
    
    <p>
    回転範囲を制限してみましょう。<br>
    <strong>(1)</strong> 「Constraintボタン」を押してON状態に移行して、角度を設定することができます。<br>
    <strong>(2)</strong> ワークスペースで、骨の回転範囲が黄色の線で表示されます。<br>
    </p>
    <br>
    
    <p>
    さて、「ジグルボーン」は、指定した角度以内で揺れるされます。<br>
    ただし、この角度は、最大範囲であり、実際には自然な動きのために範囲の約70％程度から速度が減少し始めます。<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_950.jpg"/>
    <br>
    
    <p>
    他の骨にも「ジグルボーン」を適用します。<br>
    複数の骨を選択して、一度に「ジグルボーン」を適用することができます。<br>
    <strong>(1)</strong> 対象となる骨をすべて選択します。 （CtrlキーまたはShiftキーを押して、多数の骨を選択することができます。）<br>
    <strong>(2)</strong> 右のUIで「ジグルボーン」を同時に設定することができます。<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_951.jpg"/>
    <br>
    
    <p>
    「ジグルボーン」をすぐにテストすることができます。<br>
    <strong>(1)</strong> 「骨編集モード」を解除します。 （骨編集モードでは、「ジグルボーン」が無効になり、テストボタンを押すことができません。）<br>
    <strong>(2)</strong> 「Testボタン」を押します。<br>
    <strong>(3)</strong> 「ジグルボーン」が適用されたすべての骨が動くのを見ることができます。<br>
    テスト機能を利用して、物理属性を簡単に調節することができます。<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_952.jpg"/>
    <br>
    
    <p>
    ルートユニットやアニメーションの編集画面でアニメーションを再生すると、「ジグルボーン」が適用された状態で動くキャラクターを見ることができます。<br>
    ワークスペースで上記のように物理的な効果を見ないように設定すると、「ジグルボーン」は適用されません。<br>
    Bakeをした後、Unityシーンでも「ジグルボーン」をテストしてください！<br>
    </p>
    <br>
    
    <!-- 11. 유튜브 영상 -->
    <div class="embed-responsive embed-responsive-16by9 mx-auto d-block" style="max-width: 60%;">
        <iframe class="embed-responsive-item" src="https://www.youtube.com/embed/0NVUzoy-oDg" allowfullscreen></iframe>
    </div>
    <br>
    
    
    <br><br>
    
    <br>
    <br>
    <!-- 3. 서브 타이틀 -->
    <h3>制御パラメータで重みを制御</h3>
    <br>
    
    <!-- 4. 버전 설명 -->
    <h4><span class="badge badge-secondary">1.4.0</span></h4>
    
    <p>
    デフォルトでは、ジグルボーンは常に動作しますが、時々ジグルボーンの動作を停止する必要があります。<br>
    ゲーム内で「気絶したキャラクターの腕、足が自分勝手に揺れて再び止まる」が代表的だろう。<br>
    この場合、制御パラメータでジグルボーンが動作する程度を調整できれば便利です。<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1697.jpg"/>
    <br>
    
    <p>
    ジグルボーンが適用されたキャラクターを上記のように用意しました。<br>
    キャラクターが動くと、長い髪が揺れます。<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1698.jpg"/>
    <br>
    
    <p>
    ジグルボーンの動きを確認しようとキャラクターが左右に動くアニメーションを簡単に作りました。<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1699.jpg"/>
    <br>
    
    <p>
    ゲームを実行すると、上記のようにキャラクターが動き、ジグルボーンが適用された髪も慣性に応じて動きます。<br>
    </p>
    <br>
    
    <p>
    これで、制御パラメータと簡単なスクリプトを使用してジグルボーンの動きを調整します。<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1700.jpg"/>
    <br>
    
    <p>
    制御パラメータを作成してジグルボーンをオンまたはオフにします。<br>
    <strong>(1)</strong> 新しい「制御パラメータ」を追加します。<br>
    <strong>(2)</strong> 制御パラメータの名前を決め、「<strong>Float</strong>」タイプに設定します。<br>
    ここでは「<span class="text-danger"><strong>WeightValue</strong></span>」という名前に設定しましたが、この名前を覚えておきましょう。<br>
    <strong>(3)</strong> デフォルト値を「<strong>0</strong>または<strong>1</strong>」に設定します。<br>
    <strong>(4)</strong> 値の範囲を「<strong>0～1</strong>」に設定します。<br>
    </p>
    <br>
    
    <p>
    ジグルボーンの重みは「0.0」から「1.0」の間の値を持つので、制御パラメータも同じに設定します。<br>
    「<strong>Float</strong>」以外のタイプはサポートしていません。<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1701.jpg"/>
    <br>
    
    <p>
    <strong>(1)</strong> ジグルボーンが適用されたボーンをすべて選択します。<br>
    <strong>(2)</strong> 「<strong>Weight by Control Parameter</strong>」ボタンを押してオプションを有効にします。<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1702.jpg"/>
    <br>
    
    <p>
    <strong>(1)</strong> 「<strong>Set</strong>」ボタンを押します。<br>
    <strong>(2)</strong> 先に作成した「制御パラメータ」を選択します。<br>
    <strong>(3)</strong> 「<strong>Select</strong>」ボタンを押します。<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1703.jpg"/>
    <br>
    
    <p>
    「<strong>Bake</strong>」を実行して、変更をUnityシーンに適用します。<br>
    </p>
    <br>
    
    <p>
    次に、新しいスクリプトを以下のように作成して制御パラメータを制御しましょう。<br>
    </p>
    <br>
    
    <!-- 23. 코드 예시 -->
    <div class="alert alert-warning" role="alert">
    <p>
    <br>
    using UnityEngine;<br>
    using AnyPortrait;<br>
    <br>
    public class WeightedJiggleBoneSample : MonoBehaviour<br>
    {<br>
    &emsp;&emsp;// 対象となるapPortrait<br>
    &emsp;&emsp;<strong>public apPortrait portrait;</strong><br>
    <br>
    &emsp;&emsp;void Update()<br>
    &emsp;&emsp;{<br>
    &emsp;&emsp;&emsp;&emsp;// 数字キーを押すと、制御パラメータの値が0.0、0.5、1.0に変わります。<br>
    &emsp;&emsp;&emsp;&emsp;if (Input.GetKeyDown(KeyCode.Alpha1))<br>
    &emsp;&emsp;&emsp;&emsp;{<br>
    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;portrait.<strong>SetControlParamFloat</strong>(<span class="text-danger"><strong>"WeightValue"</strong></span>, <strong>0.0f</strong>);<br>
    &emsp;&emsp;&emsp;&emsp;}<br>
    <br>
    &emsp;&emsp;&emsp;&emsp;if (Input.GetKeyDown(KeyCode.Alpha2))<br>
    &emsp;&emsp;&emsp;&emsp;{<br>
    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;portrait.<strong>SetControlParamFloat</strong>(<span class="text-danger"><strong>"WeightValue"</strong></span>, <strong>0.5f</strong>);<br>
    &emsp;&emsp;&emsp;&emsp;}<br>
    <br>
    &emsp;&emsp;&emsp;&emsp;if (Input.GetKeyDown(KeyCode.Alpha3))<br>
    &emsp;&emsp;&emsp;&emsp;{<br>
    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;portrait.<strong>SetControlParamFloat</strong>(<span class="text-danger"><strong>"WeightValue"</strong></span>, <strong>1.0f</strong>);<br>
    &emsp;&emsp;&emsp;&emsp;}<br>
    &emsp;&emsp;}<br>
    }<br>
    <br>
    </p>
    </div>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1704.jpg"/>
    <br>
    
    <p>
    <strong>(1)</strong> 新しい「<strong>GameObject</strong>」を作成し、 <strong>(2)</strong> 先ほど作成したスクリプトを追加してからapPortraitを割り当てます。<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1705.jpg"/>
    <br>
    
    <p>
    ゲームを実行し、数字キーを押して制御パラメータの値を0から1に変更しましょう。<br>
    ジグルボーンが適用される程度が上記のように変わることがわかります。<br>
    </p>
    <br>
    
    <p>
    制御パラメータを利用するため、ジグルボーンの重みをスクリプトだけでなくアニメーションでも制御することが可能です。<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1706.jpg"/>
    <br>
    
    <p>
    <strong>(1)</strong> 以前に作成した「アニメーションクリップ」を選択します。<br>
    <strong>(2)</strong> 「<strong>Add Timeline</strong>」ボタンを押します。<br>
    <strong>(3)</strong> 「<strong>Control Parameters</strong>」を選択し、 <strong>(4)</strong> 「<strong>Select</strong>」ボタンを押します。<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1707.jpg"/>
    <br>
    
    <p>
    <strong>(1)</strong> 「<strong>WeightValue</strong>」制御パラメータを <strong>(2)</strong> タイムラインに追加します。<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1708.jpg"/>
    <br>
    
    <p>
    キーフレームを追加して、制御パラメータの値を「<strong>1</strong>から<strong>0</strong>」に、もう一度「<strong>0</strong>から<strong>1</strong>」に変更します。<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1709.jpg"/>
    <br>
    
    <p>
    「Bake」をしてゲームを実行すると、ジグルボーンの重みがアニメーションによって変わることがわかります。<br>
    </p>
    <br>
    
    <!-- 12. 참고 박스 시작 -->
    <div class="alert alert-info" role="alert">
    
    <!-- 3. 서브 타이틀(참고 박스) -->
    <h4>この機能はジグルボーンをオン/オフする目的で使用してください！</h4>
    <br>
    
    <p>
    「ウェイト」は0から1の間の値を持ちますが、これは突然オンまたはオフのときに物理演算の跳ね返りを防ぐためです。<br>
    この機能の名称は「重み」ですが、実際にはジグルボーンの動きを重みで補間するものではなく、一部の属性を少しずつ制限する方法で動作します。<br>
    したがって、重みの値を長くない時間の間変えてジグルボーンを有効または無効にする目的で使用してください。<br>
    </p>
    <br>
    
    </div>
    <br>
    <br>
    
    <!-- 5. 바닥 네비바 -->
    <br>
    <br>
    <br>
    <br>
    <nav class="navbar fixed-bottom navbar-light bg-light">
        <a class="btn btn-light" role="button" href="../../jp/AdvancedManual/AD_DuplicateBoneSnap.html">< 骨の複製/子骨スナップ</a>
        <a class="btn btn-light" role="button" href="../../jp/AdvancedManual/AD_DuplicateMeshGroup.html">メッシュグループを複製 ></a>
    </nav>
    
    <!-- 페이지 내용 끝! -->

    
    <!-- 종료 -->
    </div>

    <!-- 부트스트랩 -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script type="text/javascript" src="../../js/bootstrap.js"></script>
    <!--------------->

    </body>
</html>
