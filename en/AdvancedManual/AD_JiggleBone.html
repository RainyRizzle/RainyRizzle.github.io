<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <!-- 제목 -->
        <title>Jiggle Bone</title>
        <!-- 파비콘 -->
        <link rel="shortcut icon" href="../../Images/favicon.ico"/>
        <!-- 부트스트랩 -->
        <link rel="stylesheet" href="../../css/bootstrap.css">
        <!--------------->

    </head>

    <body>
        <p>
            <nav class="navbar fixed-top navbar-expand-lg navbar-dark bg-dark">
            <!--로고 : AnyPortrait 홈페이지로 가야한다. (언어별)-->
            <a class="navbar-brand" href="https://www.rainyrizzle.com/anyportrait-eng">
                <img src="../../Images/AP_Logo.png" width="150" height="30" class="d-inline-block align-top" alt="">
            </a>

            <!--메뉴들 : 현재 페이지의 카테고리에 active 붙인다. (언어별 링크) -->
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarText">
                <ul class="navbar-nav mr-auto">
                <li class="nav-item">
                    <a class="nav-link" href="../../en/GettingStarted.html">Getting Started</a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="../../en/AdManual.html">Manual</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="../../en/Script.html">Script</a>
                </li>

                </ul>

                <!-- 언어 변경. 현재 페이지의 주소에서 언어 주소만 변경한다. (해당 언어에 active) -->
                <div class="btn-group mr-2" role="group" aria-label="Basic example">
                    <a role="button" class="btn btn-secondary active" href="../../en/AdvancedManual/AD_JiggleBone.html">EN</a>
                    <a role="button" class="btn btn-secondary" href="../../kr/AdvancedManual/AD_JiggleBone.html">KR</a>
                    <a role="button" class="btn btn-secondary" href="../../jp/AdvancedManual/AD_JiggleBone.html">JP</a>
                </div>

                <!-- 여백 -->
                <p></p>

                <!-- 검색버튼 -->
                <form class="form-inline">
                    <a class="btn btn-light" role="button" href="../../en/Search.html">Search</a>
                </form>
            </div>
        </nav>
    </p>

    <!-- 실제 바디 부분 -->
    <div class="container">
    <br>
    <br>
    <!-- 여기에 내용을 적어주세요 -->

    <!-- 여기서부터 페이지 내용이 작성됩니다. -->
    <!-- 1. 페이지 진입 경로 -->
    <p><a href="https://www.rainyrizzle.com/anyportrait-eng"><span class="text-dark">AnyPortrait</span></a> > <a href="../../en/AdManual.html"><span class="text-dark">Manual</span></a> > Jiggle Bone</p>
    
    <!-- 2. 페이지 메인 타이틀 -->
    <h1 class="display-5">Jiggle Bone</h1>
    <br>
    
    <!-- 4. 버전 설명 -->
    <h4><span class="badge badge-secondary">1.4.0</span></h4>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_946.jpg"/>
    <br>
    
    <p>
    <strong>"Jiggle Bone"</strong> refers to a bone that moves as if it is in reality with the addition of a physics effect.<br>
    In particular, AnyPortrait's Jiggle Bone supports physical effects by "inertia" and "air resistance".<br>
    </p>
    <br>
    
    <p>
    AnyPortrait's Jiggle Bone has the following characteristics:<br>
    - Resistance and inertia are calculated by detecting the position of the end point of the bone in real time.<br>
    - Jiggle bones do not work for "Helper" or zero length bones.<br>
    - "The position change" includes both "position change in the Unity scene" and "position change by animation".<br>
    - If you set the Jiggle bone with creating the basic shape with animation, the quality will be further improved.<br>
    - Gravity is not applied. If you want to reproduce gravity, make an animation to express "shape when gravity is applied" and apply a Jiggle bone.<br>
    - IK chain does not need to be activated, this feature can be applied to only one bone.<br>
    - Jiggle bones will not work if the physics effect of apPortrait is disabled by script(SetPhysicEnabled(bool)), or if the Important option is off.<br>
    - When Jiggle bones are applied to successive bones, they tend to shake more sensitively.<br>
    - Depending on the performance of the AnyPortrait Editor, simulation results may be somewhat inaccurate. So, it is recommended to test in the Unity scene.<br>
    - When recording video with the screen capture function, if you turn on the physics effect, the Jiggle bone is applied and recorded. However, there may be some differences from the simulation in the Unity scene.<br>
    - Movement by physical collision is not supported.<br>
    </p>
    <br>
    
    <p>
    This page covers how to make "<strong>long hair move naturally</strong>" and quickly with Jiggle Bone like the image above.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_947.jpg"/>
    <br>
    
    <p>
    <strong>(1)</strong> Select the <strong>Mesh Group</strong>.<br>
    <strong>(2)</strong> Select the <strong>Bone tab</strong>.<br>
    <strong>(3)</strong> <strong>Select the bone</strong> you want to apply the Jiggle bone to.<br>
    <strong>(4)</strong> Press the <strong>"Jiggle Bone" button</strong> to turn it <strong>ON</strong>.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_948.jpg"/>
    <br>
    
    <p>
    When the Jiggle bone setting is activated, the properties appear as above.<br>
    <strong>1. Mass</strong> : The higher the value, the slower and heavier the movement.<br>
    <strong>2. K-Value</strong> : This is the property to return to the original form. The larger the value, the faster and more elastically restored.<br>
    <strong>3. Air Drag</strong> : It is the degree of receiving air resistance and has a value between 0 and 1. The larger the value, the more sensitive it is to external movements and the larger the movement. This value determines the overall degree of application of the JIggle bone effect.<br>
    <strong>4. Damping</strong> : The larger this value, the shorter the shaking time and the faster it is restored to its original shape. Unlike K-Value, if this value is large, elasticity decreases.<br>
    <strong>5. Constraint ON/OFF</strong> : You can limit the angle of swing. If not restricted, the bone rotates with a value between -180 and +180 degrees.<br>
    <strong>6. Reset Value Button</strong> : Initialize property values.<br>
    <strong>7. Test Button</strong> : Pressing this button exerts the same random force on all Jiggle bones. You can test the property values.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_949.jpg"/>
    <br>
    
    <p>
    Let's limit the rotation range.<br>
    <strong>(1)</strong> Press the <strong>Constraint button</strong> to switch to the <strong>ON</strong> state and set the angle.<br>
    <strong>(2)</strong> The rotation range of the bone in the work space is indicated by a yellow line.<br>
    </p>
    <br>
    
    <p>
    Now, the Jiggle bone will swing within the specified angle.<br>
    However, this angle is the maximum range, and actually, the speed starts to decrease from about 70% of the range for natural movement.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_950.jpg"/>
    <br>
    
    <p>
    Let's apply the Jiggle bone attribute to other bones.<br>
    You can select multiple bones and apply Jiggle bones at once.<br>
    <strong>(1)</strong> Select all target bones. (You can select multiple bones by pressing Ctrl or Shift.)<br>
    <strong>(2)</strong> You can set the Jiggle bone at once on the right UI.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_951.jpg"/>
    <br>
    
    <p>
    You can test the Jiggle bone right away.<br>
    <strong>(1)</strong> Turn off <strong>Bone Edit Mode</strong>. (In Bone Edit Mode, the Jiggle bones are disabled and the Test button cannot be pressed.)<br>
    <strong>(2)</strong> Press the <strong>Test button</strong>.<br>
    <strong>(3)</strong> You can see all Jiggle bones moving.<br>
    You can conveniently adjust the physical properties using the Test function.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_952.jpg"/>
    <br>
    
    <p>
    Now when you play the animation on the <strong>Root Unit</strong> or on the <strong>Animation</strong> editing screen, you can see the character moving with the Jiggle bone applied.<br>
    If you <strong>turn off the Physics Effect</strong> as above in the workspace, Jiggle bones will not be applied.<br>
    After Bake, test your character's Jiggle bone in the Unity scene!<br>
    </p>
    <br>
    
    <!-- 11. 유튜브 영상 -->
    <div class="embed-responsive embed-responsive-16by9 mx-auto d-block" style="max-width: 60%;">
        <iframe class="embed-responsive-item" src="https://www.youtube.com/embed/0NVUzoy-oDg" allowfullscreen></iframe>
    </div>
    <br>
    
    
    <br><br>
    
    <br>
    <br>
    <!-- 3. 서브 타이틀 -->
    <h3>Controlling Weight with Control Parameters</h3>
    <br>
    
    <!-- 4. 버전 설명 -->
    <h4><span class="badge badge-secondary">1.4.0</span></h4>
    
    <p>
    By default, Jiggle bones always work, but sometimes you need to stop the Jiggle bones from moving.<br>
    A typical example in the game is that a stunned character's arms and legs are shaken and stopped.<br>
    In this case, it would be convenient to be able to control how much the Jiggle bone behaves with a Control Parameter.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1697.jpg"/>
    <br>
    
    <p>
    We prepared a character with Jiggle bones as above.<br>
    When the character moves, the long hair will wiggle.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1698.jpg"/>
    <br>
    
    <p>
    To see the movement of Jiggle bones, we made a simple animation of the character moving left and right.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1699.jpg"/>
    <br>
    
    <p>
    When the game is launched, the character moves as shown above, and the hair with Jiggle bones also moves according to inertia.<br>
    </p>
    <br>
    
    <p>
    Now we will use a control parameter and a simple script to control the movement of Jiggle bones.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1700.jpg"/>
    <br>
    
    <p>
    Let's create a Control Parameter to turn the Jiggle bone on or off.<br>
    <strong>(1)</strong> Add a new <strong>Control parameter</strong>.<br>
    <strong>(2)</strong> Set the name of the Control Parameter and set it as <strong>Float</strong> type.<br>
    In this example, we set it as "<span class="text-danger"><strong>WeightValue</strong></span>", and let's remember this name.<br>
    <strong>(3)</strong> Set the <strong>Default</strong> to <strong>0 or 1</strong>.<br>
    <strong>(4)</strong> Set the <strong>Range</strong> of values to <strong>0 to 1</strong>.<br>
    </p>
    <br>
    
    <p>
    The weight of the Jiggle bone ranges from 0.0 to 1.0, so set the range of the control parameter also the same.<br>
    Types other than <strong>Float</strong> are not supported.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1701.jpg"/>
    <br>
    
    <p>
    <strong>(1)</strong> Select all the bones to which the Jiggle bone option is applied.<br>
    <strong>(2)</strong> Activate the option by pressing the <strong>Weight by Control Parameter</strong> button.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1702.jpg"/>
    <br>
    
    <p>
    <strong>(1)</strong> Press the <strong>Set</strong> button.<br>
    <strong>(2)</strong> Select the <strong>Control Parameter</strong> created earlier.<br>
    <strong>(3)</strong> Press the <strong>Select</strong> button.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1703.jpg"/>
    <br>
    
    <p>
    Run <strong>Bake</strong> to apply the changes to the Unity scene.<br>
    </p>
    <br>
    
    <p>
    Now let's write a new script like below to control the Control Parameter.<br>
    </p>
    <br>
    
    <!-- 23. 코드 예시 -->
    <div class="alert alert-warning" role="alert">
    <p>
    <br>
    using UnityEngine;<br>
    using AnyPortrait;<br>
    <br>
    public class WeightedJiggleBoneSample : MonoBehaviour<br>
    {<br>
    &emsp;&emsp;// Target apPortrait<br>
    &emsp;&emsp;<strong>public apPortrait portrait;</strong><br>
    <br>
    &emsp;&emsp;void Update()<br>
    &emsp;&emsp;{<br>
    &emsp;&emsp;&emsp;&emsp;// If you press the numeric keys, the value of the control parameter changes to 0.0, 0.5, 1.0.<br>
    &emsp;&emsp;&emsp;&emsp;if (Input.GetKeyDown(KeyCode.Alpha1))<br>
    &emsp;&emsp;&emsp;&emsp;{<br>
    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;portrait.<strong>SetControlParamFloat</strong>(<span class="text-danger"><strong>"WeightValue"</strong></span>, <strong>0.0f</strong>);<br>
    &emsp;&emsp;&emsp;&emsp;}<br>
    <br>
    &emsp;&emsp;&emsp;&emsp;if (Input.GetKeyDown(KeyCode.Alpha2))<br>
    &emsp;&emsp;&emsp;&emsp;{<br>
    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;portrait.<strong>SetControlParamFloat</strong>(<span class="text-danger"><strong>"WeightValue"</strong></span>, <strong>0.5f</strong>);<br>
    &emsp;&emsp;&emsp;&emsp;}<br>
    <br>
    &emsp;&emsp;&emsp;&emsp;if (Input.GetKeyDown(KeyCode.Alpha3))<br>
    &emsp;&emsp;&emsp;&emsp;{<br>
    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;portrait.<strong>SetControlParamFloat</strong>(<span class="text-danger"><strong>"WeightValue"</strong></span>, <strong>1.0f</strong>);<br>
    &emsp;&emsp;&emsp;&emsp;}<br>
    &emsp;&emsp;}<br>
    }<br>
    <br>
    </p>
    </div>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1704.jpg"/>
    <br>
    
    <p>
    <strong>(1)</strong> Create a new <strong>GameObject</strong>, <strong>(2)</strong> add the written script and assign apPortrait.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1705.jpg"/>
    <br>
    
    <p>
    Run the game and change the value of the control parameter from 0 to 1 by pressing the number keys.<br>
    You can see the degree to which the Jiggle bones are applied changes as above.<br>
    </p>
    <br>
    
    <p>
    By using control parameters, it is possible to control the weight of Jiggle bones by animations as well as scripts.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1706.jpg"/>
    <br>
    
    <p>
    <strong>(1)</strong> Select the <strong>Animation Clip</strong> created earlier.<br>
    <strong>(2)</strong> Click the <strong>Add Timeline</strong> button.<br>
    <strong>(3)</strong> Select <strong>Control Parameters</strong> and <strong>(4)</strong> press the <strong>Select</strong> button.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1707.jpg"/>
    <br>
    
    <p>
    Add the "<strong>WeightValue</strong>" control parameter to the timeline.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1708.jpg"/>
    <br>
    
    <p>
    Add a keyframe to cause the value of the control parameter to change from <strong>1</strong> to <strong>0</strong> and back from <strong>0</strong> to <strong>1</strong>.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1709.jpg"/>
    <br>
    
    <p>
    If you <strong>Bake</strong> and run the game, you will see the weights of the Jiggle bones change according to the animation.<br>
    </p>
    <br>
    
    <!-- 12. 참고 박스 시작 -->
    <div class="alert alert-info" role="alert">
    
    <!-- 3. 서브 타이틀(참고 박스) -->
    <h4>Please use this function for the only purpose that turn the Jiggle bone on or off!</h4>
    <br>
    
    <p>
    "Weight" has a value between 0 and 1, but this is to prevent the "<strong>wrong movement</strong>" of physics operations when suddenly turned on or off.<br>
    The name of this function is "Weight", but, in fact, the independent movement of the Jiggle bone is not interpolated by weight, it works by limiting some properties.<br>
    Therefore, please change the weight for the short time to enable or disable the Jiggle bones.<br>
    </p>
    <br>
    
    </div>
    <br>
    <br>
    
    <!-- 5. 바닥 네비바 -->
    <br>
    <br>
    <br>
    <br>
    <nav class="navbar fixed-bottom navbar-light bg-light">
        <a class="btn btn-light" role="button" href="../../en/AdvancedManual/AD_DuplicateBoneSnap.html">< Duplicate Bone / Snap to a Child</a>
        <a class="btn btn-light" role="button" href="../../en/AdvancedManual/AD_DuplicateMeshGroup.html">Duplicating a Mesh Group ></a>
    </nav>
    
    <!-- 페이지 내용 끝! -->

    
    <!-- 종료 -->
    </div>

    <!-- 부트스트랩 -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script type="text/javascript" src="../../js/bootstrap.js"></script>
    <!--------------->

    </body>
</html>
