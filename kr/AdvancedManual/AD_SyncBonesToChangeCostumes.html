<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <!-- 제목 -->
        <title>본을 동기화하여 의상 교체하기</title>
        <!-- 파비콘 -->
        <link rel="shortcut icon" href="../../Images/favicon.ico"/>
        <!-- 부트스트랩 -->
        <link rel="stylesheet" href="../../css/bootstrap.css">
        <!--------------->

    </head>

    <body>
        <p>
            <nav class="navbar fixed-top navbar-expand-lg navbar-dark bg-dark">
            <!--로고 : AnyPortrait 홈페이지로 가야한다. (언어별)-->
            <a class="navbar-brand" href="https://www.rainyrizzle.com/anyportrait-kor">
                <img src="../../Images/AP_Logo.png" width="150" height="30" class="d-inline-block align-top" alt="">
            </a>

            <!--메뉴들 : 현재 페이지의 카테고리에 active 붙인다. (언어별 링크) -->
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarText">
                <ul class="navbar-nav mr-auto">
                <li class="nav-item">
                    <a class="nav-link" href="../../kr/GettingStarted.html">시작하기</a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="../../kr/AdManual.html">메뉴얼</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="../../kr/Script.html">스크립트</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="https://www.rainyrizzle.com/ap-videotutorial-kor">동영상</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="https://www.rainyrizzle.com/ap-forum">게시판</a>
                </li>

                </ul>

                <!-- 언어 변경. 현재 페이지의 주소에서 언어 주소만 변경한다. (해당 언어에 active) -->
                <div class="btn-group mr-2" role="group" aria-label="Basic example">
                    <a role="button" class="btn btn-secondary" href="../../en/AdvancedManual/AD_SyncBonesToChangeCostumes.html">EN</a>
                    <a role="button" class="btn btn-secondary active" href="../../kr/AdvancedManual/AD_SyncBonesToChangeCostumes.html">KR</a>
                    <a role="button" class="btn btn-secondary" href="../../jp/AdvancedManual/AD_SyncBonesToChangeCostumes.html">JP</a>
                </div>

                <!-- 여백 -->
                <p></p>

                <!-- 검색버튼 -->
                <form class="form-inline">
                    <a class="btn btn-light" role="button" href="../../kr/Search.html">검색</a>
                </form>
            </div>
        </nav>
    </p>

    <!-- 실제 바디 부분 -->
    <div class="container">
    <br>
    <br>
    <!-- 여기에 내용을 적어주세요 -->

    <!-- 여기서부터 페이지 내용이 작성됩니다. -->
    <!-- 1. 페이지 진입 경로 -->
    <p><a href="https://www.rainyrizzle.com/anyportrait-kor"><span class="text-dark">AnyPortrait</span></a> > <a href="../../kr/AdManual.html"><span class="text-dark">메뉴얼</span></a> > 본을 동기화하여 의상 교체하기</p>
    
    <!-- 2. 페이지 메인 타이틀 -->
    <h1 class="display-5">본을 동기화하여 의상 교체하기</h1>
    <br>
    
    <!-- 4. 버전 설명 -->
    <h4><span class="badge badge-secondary">1.3.4</span></h4>
    
    <p>
    AnyPortrait를 이용하여 게임을 만드는 사용자들께서 "캐릭터의 의상을 교체하기"에 대한 많은 피드백을 주셨습니다.<br>
    저희 팀은 두가지 기능을 통해서 의상을 바꾸는 것을 제작하는 방법을 아래와 같이 안내해드렸습니다.<br>
    - <a href="../../kr/AdvancedManual/AD_CharacterCostume.html">캐릭터의 의상을 교체하기</a><br>
    - <a href="../../kr/AdvancedManual/AD_SynchronizeWithOthers.html">다른 캐릭터와 동기화된 재생</a><br>
    </p>
    <br>
    
    <p>
    하지만 더 효율적으로 제작을 하기 위해서 저희는 또다른 방법을 고민하였습니다.<br>
    많은 게임 프로젝트에서 본을 이용하여 캐릭터 애니메이션을 제작한다는 점에서, 본을 동기화하는 방법이 꽤 유용할 것이라고 저희는 생각합니다.<br>
    이 페이지에서 소개하는 방법은 다음의 경우에 매우 유용할 것입니다.<br>
    - "본체"의 크기가 일정하고, 부착되는 "의상"의 수가 많은 경우<br>
    - "의상"에 별도의 애니메이션을 만들지 않고자 하는 경우<br>
    - "의상"의 대부분의 본들이 "본체"의 본을 공유하는 경우<br>
    - 본들의 크기를 바꾸지 않는 경우<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1281.jpg"/>
    <br>
    
    <p>
    이 페이지에서 다룰 캐릭터와 의상 이미지입니다.<br>
    모두 PSD 파일로 만들어졌습니다.<br>
    이 페이지에서는 <strong>"의상(Costume1, 2, 3)"</strong>을 각각 <strong>"본체(MainCharacter)"</strong>에 동기화하면서 의상을 교체하는 방법을 소개합니다.<br>
    </p>
    <br>
    
    <br>
    <br>
    <!-- 3. 서브 타이틀 -->
    <h3>본체 캐릭터 만들기</h3>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1282.jpg"/>
    <br>
    
    <p>
    먼저, 바탕이 되는 <strong>"본체 캐릭터(MainCharacter)"</strong>를 만들어 봅시다.<br>
    PSD 파일을 가져와서 캐릭터를 제작합니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1283.jpg"/>
    <br>
    
    <p>
    <strong>(1)</strong> <strong>Rigging 모디파이어</strong>를 이용하여 본들과 메시들을 연결하고 <strong>Transform (Animation) 모디파이어</strong>를 추가합니다.<br>
    <strong>(2)</strong> 2개의 애니메이션을 제작했습니다.<br>
    이것으로 <strong>"본체 캐릭터(MainCharacter)"</strong>가 완성되었습니다.<br>
    </p>
    <br>
    
    <br>
    <br>
    <!-- 3. 서브 타이틀 -->
    <h3>의상(Costume) 만들기</h3>
    <br>
    
    <p>
    의상을 만드는 방법은 크게 두가지가 있습니다.<br>
    간단한 방법은, 본체 캐릭터의 본들을 파일로 내보내고, 다시 새로운 apPortrait에 가져와서 리깅하는 방법입니다.<br>
    본들을 파일로 내보내고 가져오는 방법은 아래의 페이지에서 확인할 수 있습니다.<br>
    - <a href="../../kr/AdvancedManual/AD_SaveBoneSettings.html">본 설정을 파일로 내보내기/가져오기</a><br>
    </p>
    <br>
    
    <p>
    하지만 동기화되는 객체들을 정교하게 연결하기 위해서는 섬세하게 리깅을 할 필요가 있습니다.<br>
    따라서 또다른 방법인 <strong>복제하여 같이 리깅하기</strong>를 소개합니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1284.jpg"/>
    <br>
    
    <p>
    이 방법은 본체 캐릭터를 복제하고, 의상을 부착한 상태로 새로운 완성된 캐릭터를 만드는 것이 중요한 점입니다.<br>
    <strong>(1)</strong> 유니티 씬에서 앞서 만든 <strong>"MainCharacter"</strong>를 <strong>복제</strong>하고, 이름을 <strong>"Costume1"</strong>로 변경합니다.<br>
    <strong>(2)</strong> 이름이 다른 동일한 2개의 캐릭터를 볼 수 있습니다.<br>
    앞으로는 <strong>복제된 "Costume1"</strong> 캐릭터를 선택하여 편집해봅시다. (더이상 본체 캐릭터는 편집하지 않습니다.)<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1285.jpg"/>
    <br>
    
    <p>
    AnyPortrait 에디터로 <strong>"Costume1" 캐릭터</strong>를 엽니다.<br>
    아직 수정이 되지 않은 상태이므로 <strong>"MainCharacter"</strong>와 완전히 동일한 상태입니다.<br>
    <strong>(1)</strong> PSD로 된 의상 이미지 파일을 열어봅시다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1286.jpg"/>
    <br>
    
    <p>
    PSD 파일로 존재하는 "의상" 이미지를 가져옵니다.<br>
    이때 주의해야하는 점이 있습니다.<br>
    - 본체 캐릭터의 PSD 이미지의 크기와 의상의 PSD 이미지 크기가 동일해야 합니다.<br>
    - PSD 이미지 상에서 본체 캐릭터와 의상을 겹쳤을 때 위치가 딱 맞아야 합니다. <br>
    위 조건을 만족하지 않는 의상 이미지 파일을 연다면 수작업으로 의상의 위치를 조절해야 합니다.<br>
    </p>
    <br>
    
    <p>
    의상 PSD 파일을 Atlas로 Bake하여 현재의 apPortrait로 가져옵니다.<br>
    Atlas Bake 설정은 본체와 동일하지 않아도 됩니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1287.jpg"/>
    <br>
    
    <p>
    <strong>(1)</strong> 원래의 이미지, 메시, 메시 그룹과는 별도로 의상 이미지에 대한 객체들이 생성되었습니다.<br>
    <strong>(2)</strong> 특히, 의상에 대한 새로운 메시 그룹이 생성된 것을 확인해주세요.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1288.jpg"/>
    <br>
    
    <p>
    다음 작업은, 본체에 대한 메시 그룹에 의상 메시들을 겹치는 것입니다.<br>
    <strong>(1)</strong> 다시 본체에 대한 메시 그룹을 선택합니다.<br>
    <strong>(2)</strong> <strong>+</strong> 버튼을 누릅니다.<br>
    <strong>(3)</strong> <strong>Mesh Group</strong> 탭을 선택합니다.<br>
    <strong>(4)</strong> 추가된 의상에 대한 메시 그룹을 선택합니다.<br>
    <strong>(5)</strong> <strong>Add</strong> 버튼을 누릅니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1289.jpg"/>
    <br>
    
    <p>
    <strong>(1)</strong> 이제 의상 메시들이 있는 메시 그룹이 합쳐진 것을 볼 수 있습니다.<br>
    여기서 의상 메시들을 옮겨서 하나의 메시 그룹만 남겨봅시다.<br>
    (이 과정은 불필요한 데이터를 줄이기 위함이며 필수적으로 해야하는 작업은 아닙니다.)<br>
    <strong>(2)</strong> 의상 메시 그룹의 메시들을 모두 선택합니다. ( <kbd>Shift</kbd> 를 누르고 선택하면 편리합니다.)<br>
    <strong>(3)</strong> <strong>Migrate</strong> 버튼을 누릅니다.<br>
    <strong>(4)</strong> 두개의 메시 그룹이 보여질 것입니다. 루트 메시 그룹인 본체에 해당하는 메시 그룹을 선택합니다.<br>
    <strong>(5)</strong> <strong>Select</strong> 버튼을 누릅니다.<br>
    <strong>(6)</strong> Migrate 기능을 사용할 때는 데이터 이전 과정에서 문제가 발생할 수 있어서 주의가 필요합니다. (<a href="../../kr/AdvancedManual/AD_DuplicateMigratingSubObj.html">관련 페이지</a>) 확인 버튼을 눌러줍니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1290.jpg"/>
    <br>
    
    <p>
    이제 의상에 대한 메시 그룹 내에 메시들은 모두 본체 캐릭터의 메시들이 있는 루트 메시 그룹으로 이동했습니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1291.jpg"/>
    <br>
    
    <p>
    비어있는 메시 그룹을 삭제합니다.<br>
    <strong>(1)</strong> 의상 메시 그룹을 선택합니다.<br>
    <strong>(2)</strong> <strong>Detach</strong> 버튼을 누릅니다.<br>
    <strong>(3)</strong> 안내 메시지에서도 <strong>Detach</strong> 버튼을 눌러서 메시 그룹을 분리합니다.<br>
    이제 해당 메시 그룹이 자식 메시 그룹이 아니게 되었습니다.<br>
    Detach 후, 왼쪽 Hierarchy 탭에서 의상 메시 그룹을 선택한 후 삭제하면 되겠습니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1292.jpg"/>
    <br>
    
    <p>
    <strong>(1)</strong> 위와 같이 본체와 의상이 적절히 보여지도록, 의상 메시의 렌더링 순서들을 변경해봅시다.<br>
    <strong>(2)</strong> 의상 메시들과 본체 메시들을 구분하기 위해 본체 메시의 이름 앞에 <strong>"REF_"</strong> 라는 접두사를 붙여봅시다.<br>
    <strong>(3)</strong> 의상 메시들을 편집하고 완성하여 리깅 작업을 위한 준비를 합니다.<br>
    </p>
    <br>
    
    <p>
    만약 의상 PSD 파일을 가져올 때의 주의사항이 지켜지지 않았다면, 이 단계에서 본체와 의상 메시들의 위치가 맞지 않을 것입니다.<br>
    이 단계에서 의상 메시들의 위치를 적절하게 수정합니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1293.jpg"/>
    <br>
    
    <p>
    리깅을 하기 전에 본을 추가할 수 있습니다.<br>
    <strong>(1)</strong> 머리카락 움직임을 표현하기 위한 본들을 추가해보았습니다.<br>
    이 본들을 본체의 본들 중 "Head 본"의 자식으로 연결시켰습니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1294.jpg"/>
    <br>
    
    <p>
    <strong>(1)</strong> 치마의 움직임을 위한 본들도 추가합니다.<br>
    <strong>(2)</strong> 지글본으로 설정하여 별도의 애니메이션이 없이도 물리적인 흔들림을 가지도록 만들 수 있습니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1295.jpg"/>
    <br>
    
    <p>
    이제 의상 메시에 대해서 리깅을 해봅시다.<br>
    Rigging 모디파이어를 선택하고, 메시들을 추가한 후 가중치를 할당합니다.<br>
    (Rigging 모디파이어는 이미 존재할 것입니다.)<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1296.jpg"/>
    <br>
    
    <p>
    의상 메시를 대상으로 리깅을 할 때, 가장 중요한 것은 <strong>본체와 겹치는 부분</strong>에서 가중치를 할당하는 방법입니다.<br>
    가중치를 적절하게 할당하지 않는다면 캐릭터의 손이나 발이 의상을 뚫고 나오는 모습을 볼 수도 있을 것입니다.<br>
    이때, <strong>Pos-Copy</strong> 기능을 이용하면 이러한 고민을 덜 수 있을 것입니다. (<a href="../../kr/AdvancedManual/AD_VariousRigging.html">관련 페이지</a>)<br>
    <strong>(1)</strong> 리깅을 하고자 하는 옷과 겹쳐져있는 본체의 메시의 모든 버텍스들을 선택합니다.<br>
    <strong>(2)</strong> <strong>Pos-Copy</strong> 버튼을 눌러서 리깅 가중치들을 복사합니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1297.jpg"/>
    <br>
    
    <p>
    <strong>(3)</strong> 의상 메시의 버텍스들을 선택합니다.<br>
    <strong>(4)</strong> <strong>Pos-Paste</strong> 버튼을 눌러서 복사된 가중치를 버텍스에 할당합니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1298.jpg"/>
    <br>
    
    <p>
    이제 본을 움직여보면 본체의 메시와 함께 의상 메시가 같이 움직이는 것을 볼 수 있습니다.<br>
    이 단계에서 가중치를 더 정밀하게 수정해야 하지만, 이 기능을 통해서 많은 작업 시간을 줄일 수 있을 것입니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1299.jpg"/>
    <br>
    
    <p>
    모든 메시들을 대상으로 리깅 작업을 마쳤다면 캐릭터가 옷을 입은 것 처럼 자연스럽게 움직일 것입니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1300.jpg"/>
    <br>
    
    <p>
    같은 방법으로, 다른 의상(Costume2, Costume 3)도 만들어줍시다.<br>
    (각각의 의상들은 서로 다른 apPortrait가 되어야 합니다.)<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1301.jpg"/>
    <br>
    
    <p>
    현재 단계까지 완성된 화면입니다.<br>
    본체 캐릭터(MainCharacter)와 의상이 입혀진 3개의 캐릭터(Costume1, 2, 3)이 씬에 배치되었습니다.<br>
    </p>
    <br>
    
    <p>
    아직 의상과 캐릭터가 합쳐진 상태이므로, Costume 1, 2, 3에서 본체 캐릭터의 메시들을 제거하는 작업이 남아있습니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1302.jpg"/>
    <br>
    
    <p>
    <strong>의상 캐릭터(Costume1, 2, 3)</strong>를 AnyPortrait 에디터로 열고 메시 그룹을 선택합니다.<br>
    <strong>(1)</strong> 본체 캐릭터의 메시들을 선택합니다. 앞서 해당 메시들의 이름에 <strong>"REF_"</strong>를 붙였다면 구분하기 쉬울 것입니다.<br>
    <strong>(2)</strong> <strong>Detach</strong> 버튼을 누릅니다.<br>
    <strong>(3)</strong> 안내 메시지에서도 <strong>Detach</strong> 버튼을 누릅니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1303.jpg"/>
    <br>
    
    <p>
    <strong>(1)</strong> 그 외에도 본체 캐릭터의 이미지, 메시들도 모두 삭제합니다.<br>
    이제 위와 같이 의상에 대한 이미지, 메시, 메시 그룹만 남았습니다.<br>
    </p>
    <br>
    
    <!-- 12. 참고 박스 시작 -->
    <div class="alert alert-info" role="alert">
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1304.jpg"/>
    <br>
    
    <p>
    여러개의 이미지나 메시들을 삭제할 때, 일일이 선택하고 삭제하는 것은 매우 번거로운 일입니다.<br>
    Hierarchy에서 우클릭을 한 후, 위와 같이 여러개를 한꺼번에 삭제할 수 있습니다.<br>
    이 기능에 대해서는 <a href="../../kr/AdvancedManual/AD_HierarchyUI.html">관련 페이지</a>를 참고해주세요.<br>
    </p>
    <br>
    
    </div>
    <br>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1305.jpg"/>
    <br>
    
    <p>
    이 과정을 모두 마쳤다면 위와 같이 "본체 캐릭터" 1종과 "의상 캐릭터" 3종이 유니티 씬에 배치될 것입니다.<br>
    - 본체 캐릭터와 의상들은 거의 동일한 본들을 가지고 있으며 <strong>Rigging 모디파이어</strong>가 동일하게 적용되어 있습니다.<br>
    - <strong>Transform (Animation)</strong> 및 <strong>애니메이션</strong>들은 본체 캐릭터만 가지고 있습니다.<br>
    </p>
    <br>
    
    <br>
    <br>
    <!-- 3. 서브 타이틀 -->
    <h3>스크립트를 작성하여 동기화하기</h3>
    <br>
    
    <p>
    다음 단계는 스크립트를 작성하여 의상을 본체 캐릭터에 부착하는 것입니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1306.jpg"/>
    <br>
    
    <p>
    스크립트로 작성하고자 하는 내용을 위와 같이 구상해보았습니다.<br>
    - <strong>Character Group</strong>이라는 <strong>GameObject</strong>를 생성하고, <strong>본체 캐릭터(MainCharacter)</strong>를 자식으로서 등록합니다.<br>
    - <strong>의상</strong>을 <strong>부착(Attach)</strong>할 때 <strong>Character Group</strong>의 자식으로 등록합니다. <strong>Character Group</strong>를 제어하여 본체와 의상이 같이 움직이게 만들기 위함입니다.<br>
    - 렌더링 문제를 해결하기 위해 <strong>Character Group</strong>에 <strong>Sorting Group</strong> 컴포넌트를 추가합니다.<br>
    - 의상과 본체 캐릭터 간의 본의 움직임을 동기화합니다.<br>
    </p>
    <br>
    
    <p>
    위 내용을 모두 담은 스크립트를 작성해봅시다.<br>
    새로운 C# 스크립트를 생성하고, 아래와 같이 작성해봅시다.<br>
    </p>
    <br>
    
    <!-- 23. 코드 예시 -->
    <div class="alert alert-warning" role="alert">
    <p>
    <br>
    using UnityEngine;<br>
    using AnyPortrait;<br>
    <br>
    public class BoneSyncScript : MonoBehaviour<br>
    {<br>
    &emsp;&emsp;public Transform characterGroup;<br>
    &emsp;&emsp;public apPortrait mainCharacter;<br>
    <br>
    &emsp;&emsp;public apPortrait costume1;<br>
    &emsp;&emsp;public apPortrait costume2;<br>
    &emsp;&emsp;public apPortrait costume3;<br>
    <br>
    &emsp;&emsp;void Start() { }<br>
    <br>
    &emsp;&emsp;void Update()<br>
    &emsp;&emsp;{<br>
    &emsp;&emsp;&emsp;&emsp;//Q나 W키를 눌러서 본체 캐릭터의 애니메이션을 재생합니다.<br>
    &emsp;&emsp;&emsp;&emsp;if(Input.GetKeyDown(KeyCode.Q)) { mainCharacter.Play("Idle"); }<br>
    &emsp;&emsp;&emsp;&emsp;if(Input.GetKeyDown(KeyCode.W)) { mainCharacter.Play("Walk"); }<br>
    <br>
    &emsp;&emsp;&emsp;&emsp;//숫자키 1을 누르면 모든 의상의 부착이 해제되고, 의상 1이 부착됩니다.<br>
    &emsp;&emsp;&emsp;&emsp;if(Input.GetKeyDown(KeyCode.Alpha1))<br>
    &emsp;&emsp;&emsp;&emsp;{<br>
    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;DetachCostumes();<br>
    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<strong>AttachCostume1();</strong><br>
    &emsp;&emsp;&emsp;&emsp;}<br>
    <br>
    &emsp;&emsp;&emsp;&emsp;//숫자키 2를 누르면 모든 의상의 부착이 해제되고, 의상 2가 부착됩니다.<br>
    &emsp;&emsp;&emsp;&emsp;if(Input.GetKeyDown(KeyCode.Alpha2))<br>
    &emsp;&emsp;&emsp;&emsp;{<br>
    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;DetachCostumes();<br>
    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<strong>AttachCostume2();</strong><br>
    &emsp;&emsp;&emsp;&emsp;}<br>
    <br>
    &emsp;&emsp;&emsp;&emsp;//숫자키 3을 누르면 모든 의상의 부착이 해제되고, 의상 3이 부착됩니다.<br>
    &emsp;&emsp;&emsp;&emsp;if(Input.GetKeyDown(KeyCode.Alpha3))<br>
    &emsp;&emsp;&emsp;&emsp;{<br>
    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;DetachCostumes();<br>
    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;<strong>AttachCostume3();</strong><br>
    &emsp;&emsp;&emsp;&emsp;}<br>
    <br>
    &emsp;&emsp;&emsp;&emsp;//숫자키 4를 누르면 모든 의상의 부착이 해제됩니다.<br>
    &emsp;&emsp;&emsp;&emsp;if(Input.GetKeyDown(KeyCode.Alpha4))<br>
    &emsp;&emsp;&emsp;&emsp;{<br>
    &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;DetachCostumes();<br>
    &emsp;&emsp;&emsp;&emsp;}<br>
    &emsp;&emsp;}<br>
    <br>
    &emsp;&emsp;//의상들의 부착을 모두 해제하는 함수<br>
    &emsp;&emsp;private void DetachCostumes()<br>
    &emsp;&emsp;{<br>
    &emsp;&emsp;&emsp;&emsp;//Unsynchronize 함수를 호출하여 본 동기화를 해제합니다.<br>
    &emsp;&emsp;&emsp;&emsp;<span class="text-primary"><strong>costume1.Unsynchronize();</strong></span><br>
    &emsp;&emsp;&emsp;&emsp;<span class="text-primary"><strong>costume2.Unsynchronize();</strong></span><br>
    &emsp;&emsp;&emsp;&emsp;<span class="text-primary"><strong>costume3.Unsynchronize();</strong></span><br>
    <br>
    &emsp;&emsp;&emsp;&emsp;//부모 GameObject로 부터 독립을 시킵니다. (위치는 보기 좋게 적절히 분산시켰습니다.)<br>
    &emsp;&emsp;&emsp;&emsp;costume1.transform.parent = null;<br>
    &emsp;&emsp;&emsp;&emsp;costume1.transform.position = new Vector3(0, 0, 0);<br>
    &emsp;&emsp;&emsp;&emsp;costume2.transform.parent = null;<br>
    &emsp;&emsp;&emsp;&emsp;costume2.transform.position = new Vector3(4, 0, 0);<br>
    &emsp;&emsp;&emsp;&emsp;costume3.transform.parent = null;<br>
    &emsp;&emsp;&emsp;&emsp;costume3.transform.position = new Vector3(8, 0, 0);<br>
    &emsp;&emsp;}<br>
    <br>
    &emsp;&emsp;//의상 1(Costume1)을 Character Group의 자식으로 등록하고, 본체 캐릭터의 본 움직임과 동기화를 합니다.<br>
    &emsp;&emsp;private void <strong>AttachCostume1()</strong><br>
    &emsp;&emsp;{<br>
    &emsp;&emsp;&emsp;&emsp;//Character Group의 자식으로 등록하고, Local 위치를 초기화합니다.<br>
    &emsp;&emsp;&emsp;&emsp;costume1.transform.parent = characterGroup;<br>
    &emsp;&emsp;&emsp;&emsp;costume1.transform.localPosition = Vector3.zero;<br>
    <br>
    &emsp;&emsp;&emsp;&emsp;//Synchronize 함수를 이용하여 본 움직임을 동기화할 수 있습니다.<br>
    &emsp;&emsp;&emsp;&emsp;<span class="text-danger"><strong>costume1.Synchronize(mainCharacter, false, false, false, true, SYNC_BONE_OPTION.MatchFromRoot);</strong></span><br>
    &emsp;&emsp;}<br>
    <br>
    &emsp;&emsp;//의상 2(Costume2)를 Character Group의 자식으로 등록하고, 본체 캐릭터의 본 움직임과 동기화를 합니다.<br>
    &emsp;&emsp;private void <strong>AttachCostume2()</strong><br>
    &emsp;&emsp;{<br>
    &emsp;&emsp;&emsp;&emsp;//Character Group의 자식으로 등록하고, Local 위치를 초기화합니다.<br>
    &emsp;&emsp;&emsp;&emsp;costume2.transform.parent = characterGroup;<br>
    &emsp;&emsp;&emsp;&emsp;costume2.transform.localPosition = Vector3.zero;<br>
    <br>
    &emsp;&emsp;&emsp;&emsp;//Synchronize 함수를 이용하여 본 움직임을 동기화할 수 있습니다.<br>
    &emsp;&emsp;&emsp;&emsp;<span class="text-danger"><strong>costume2.Synchronize(mainCharacter, false, false, false, true, SYNC_BONE_OPTION.MatchFromRoot);</strong></span><br>
    &emsp;&emsp;}<br>
    <br>
    &emsp;&emsp;//의상 3(Costume3)을 Character Group의 자식으로 등록하고, 본체 캐릭터의 본 움직임과 동기화를 합니다.<br>
    &emsp;&emsp;private void <strong>AttachCostume3()</strong><br>
    &emsp;&emsp;{<br>
    &emsp;&emsp;&emsp;&emsp;//Character Group의 자식으로 등록하고, Local 위치를 초기화합니다.<br>
    &emsp;&emsp;&emsp;&emsp;costume3.transform.parent = characterGroup;<br>
    &emsp;&emsp;&emsp;&emsp;costume3.transform.localPosition = Vector3.zero;<br>
    <br>
    &emsp;&emsp;&emsp;&emsp;//Synchronize 함수를 이용하여 본 움직임을 동기화할 수 있습니다.<br>
    &emsp;&emsp;&emsp;&emsp;<span class="text-danger"><strong>costume3.Synchronize(mainCharacter, false, false, false, true, SYNC_BONE_OPTION.MatchFromRoot);</strong></span><br>
    &emsp;&emsp;}<br>
    }<br>
    <br>
    </p>
    </div>
    <br>
    
    <p>
    여기서 제일 중요한 스크립트는 AttachCostume 함수 안에 있습니다.<br>
    characterGroup의 자식으로 등록하는 코드와 더불어서 <strong>Synchronize</strong> 함수를 사용하는 부분을 주의깊게 확인해주세요.<br>
    필요하다면 애니메이션, 컨트롤 파라미터 또는 루트 유닛을 동기화하는 것도 가능합니다.<br>
    <strong>Synchronize</strong> 함수에 대한 자세한 설명은 <a href="../../kr/Script/SC_Init.html">관련 페이지</a>에서 확인할 수 있으며, 또한 <strong>본 동기화</strong>에 대한 자세한 설명을 이 페이지의 하단에서 보실 수 있습니다.<br>
    </p>
    <br>
    
    <p>
    이제 작성한 스크립트를 유니티 씬에 배치하여 동작하게 만듭니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1307.jpg"/>
    <br>
    
    <p>
    <strong>(1)</strong> CharacterGroup이라는 이름의 GameObject를 생성하고, 본체 캐릭터(MainCharacter)를 자식으로 추가합니다. 또한 스크립트를 배치할 새로운 GameObject를 생성합니다.<br>
    <strong>(2)</strong> 스크립트를 컴포넌트로 추가하고, 각각의 요소들을 연결합니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1308.jpg"/>
    <br>
    
    <p>
    <strong>(1)</strong> <strong>CharacterGroup</strong>을 선택하고 <strong>(2)</strong> <strong>Sorting Group</strong> 컴포넌트를 추가합니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1310.jpg"/>
    <br>
    
    <p>
    게임을 실행하면 스크립트가 동작하면서 의상을 하나씩 캐릭터에 입혀볼 수 있습니다.<br>
    본이 동기화되면서 캐릭터와 의상이 하나가 된 것처럼 움직입니다.<br>
    </p>
    <br>
    
    <br>
    <br>
    <!-- 3. 서브 타이틀 -->
    <h3>메시의 렌더링 순서 수정하기</h3>
    <br>
    
    <p>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1311.jpg"/>
    <br>
    
    <p>
    기본적인 동기화는 모두 끝났지만, 아직 남은 작업이 있습니다.<br>
    합쳐진 캐릭터를 자세히 보면, 겹쳐진 메시들의 렌더링 순서가 적절하지 않습니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1312.jpg"/>
    <br>
    
    <p>
    <strong>의상 1(Costume1)</strong>의 경우 위와 같이 메시들의 렌더링 순서가 설정되도록 디자인이 되었습니다.<br>
    위의 순서에 맞게 메시들의 렌더링 순서를 할당하도록 스크립트를 수정해봅시다.<br>
    (메시의 렌더링 순서를 설정하는 방법을 다루는 자세한 방법에 대해서는 <a href="../../kr/AdvancedManual/AD_SortingOrderInAttachMesh.html">관련 페이지</a>에서 확인할 수 있습니다.)<br>
    </p>
    <br>
    
    <!-- 23. 코드 예시 -->
    <div class="alert alert-warning" role="alert">
    <p>
    <br>
    &emsp;&emsp;(앞부분 생략)<br>
    &emsp;&emsp;//의상 1(Costume1)을 Character Group의 자식으로 등록하고, 본체 캐릭터의 본 움직임과 동기화를 합니다.<br>
    &emsp;&emsp;private void <strong>AttachCostume1()</strong><br>
    &emsp;&emsp;{<br>
    &emsp;&emsp;&emsp;&emsp;//Character Group의 자식으로 등록하고, Local 위치를 초기화합니다.<br>
    &emsp;&emsp;&emsp;&emsp;costume1.transform.parent = characterGroup;<br>
    &emsp;&emsp;&emsp;&emsp;costume1.transform.localPosition = Vector3.zero;<br>
    <br>
    &emsp;&emsp;&emsp;&emsp;//Synchronize 함수를 이용하여 본 움직임을 동기화할 수 있습니다.<br>
    &emsp;&emsp;&emsp;&emsp;costume1.Synchronize(mainCharacter, false, false, true, SYNC_BONE_OPTION.MatchFromRoot, false);<br>
    <br>
    &emsp;&emsp;&emsp;&emsp;//의상 1 메시들의 렌더링 순서(Sorting Order)를 본체의 메시를 기준으로 수정합니다.<br>
    &emsp;&emsp;&emsp;&emsp;<span class="text-danger"><strong>costume1.SetSortingOrder("HairFront", mainCharacter.GetSortingOrder("Head") + 1);</strong></span><br>
    &emsp;&emsp;&emsp;&emsp;<span class="text-danger"><strong>costume1.SetSortingOrder("LeftArm", mainCharacter.GetSortingOrder("LeftArm") + 1);</strong></span><br>
    &emsp;&emsp;&emsp;&emsp;<span class="text-danger"><strong>costume1.SetSortingOrder("Body", mainCharacter.GetSortingOrder("LeftLeg") + 2);</strong></span><br>
    &emsp;&emsp;&emsp;&emsp;<span class="text-danger"><strong>costume1.SetSortingOrder("LeftShoe", mainCharacter.GetSortingOrder("LeftLeg") + 1);</strong></span><br>
    &emsp;&emsp;&emsp;&emsp;<span class="text-danger"><strong>costume1.SetSortingOrder("RightShoe", mainCharacter.GetSortingOrder("RightLeg") + 1);</strong></span><br>
    &emsp;&emsp;&emsp;&emsp;<span class="text-danger"><strong>costume1.SetSortingOrder("HairSide", mainCharacter.GetSortingOrder("RightArm") + 1);</strong></span><br>
    &emsp;&emsp;&emsp;&emsp;<span class="text-danger"><strong>costume1.SetSortingOrder("HairBack", mainCharacter.GetSortingOrder("RightArm") - 10);</strong></span><br>
    &emsp;&emsp;}<br>
    <br>
    &emsp;&emsp;//의상 2(Costume2)를 Character Group의 자식으로 등록하고, 본체 캐릭터의 본 움직임과 동기화를 합니다.<br>
    &emsp;&emsp;private void <strong>AttachCostume2()</strong><br>
    &emsp;&emsp;{<br>
    &emsp;&emsp;&emsp;&emsp;//Character Group의 자식으로 등록하고, Local 위치를 초기화합니다.<br>
    &emsp;&emsp;&emsp;&emsp;costume2.transform.parent = characterGroup;<br>
    &emsp;&emsp;&emsp;&emsp;costume2.transform.localPosition = Vector3.zero;<br>
    <br>
    &emsp;&emsp;&emsp;&emsp;//Synchronize 함수를 이용하여 본 움직임을 동기화할 수 있습니다.<br>
    &emsp;&emsp;&emsp;&emsp;costume2.Synchronize(mainCharacter, false, false, true, SYNC_BONE_OPTION.MatchFromRoot, false);<br>
    <br>
    &emsp;&emsp;&emsp;&emsp;//의상 2 메시들의 렌더링 순서(Sorting Order)를 본체의 메시를 기준으로 수정합니다.<br>
    &emsp;&emsp;&emsp;&emsp;<span class="text-danger"><strong>costume2.SetSortingOrder("HairFront", mainCharacter.GetSortingOrder("Head") + 1);</strong></span><br>
    &emsp;&emsp;&emsp;&emsp;<span class="text-danger"><strong>costume2.SetSortingOrder("HairSide", mainCharacter.GetSortingOrder("Head") - 1);</strong></span><br>
    &emsp;&emsp;&emsp;&emsp;<span class="text-danger"><strong>costume2.SetSortingOrder("LeftArm", mainCharacter.GetSortingOrder("LeftArm") + 1);</strong></span><br>
    &emsp;&emsp;&emsp;&emsp;<span class="text-danger"><strong>costume2.SetSortingOrder("Body", mainCharacter.GetSortingOrder("Body") + 1);</strong></span><br>
    &emsp;&emsp;&emsp;&emsp;<span class="text-danger"><strong>costume2.SetSortingOrder("BeltFront", mainCharacter.GetSortingOrder("LeftLeg") + 4);</strong></span><br>
    &emsp;&emsp;&emsp;&emsp;<span class="text-danger"><strong>costume2.SetSortingOrder("Pants_LeftLeg", mainCharacter.GetSortingOrder("LeftLeg") + 3);</strong></span><br>
    &emsp;&emsp;&emsp;&emsp;<span class="text-danger"><strong>costume2.SetSortingOrder("BeltBack", mainCharacter.GetSortingOrder("LeftLeg") + 2);</strong></span><br>
    &emsp;&emsp;&emsp;&emsp;<span class="text-danger"><strong>costume2.SetSortingOrder("LeftShoe", mainCharacter.GetSortingOrder("LeftLeg") + 1);</strong></span><br>
    &emsp;&emsp;&emsp;&emsp;<span class="text-danger"><strong>costume2.SetSortingOrder("RightLeg", mainCharacter.GetSortingOrder("RightLeg") + 2);</strong></span><br>
    &emsp;&emsp;&emsp;&emsp;<span class="text-danger"><strong>costume2.SetSortingOrder("RightShoe", mainCharacter.GetSortingOrder("RightLeg") + 1);</strong></span><br>
    &emsp;&emsp;&emsp;&emsp;<span class="text-danger"><strong>costume2.SetSortingOrder("RightArm", mainCharacter.GetSortingOrder("RightArm") + 1);</strong></span><br>
    &emsp;&emsp;&emsp;&emsp;<span class="text-danger"><strong>costume2.SetSortingOrder("RightArm", mainCharacter.GetSortingOrder("RightArm") + 1);</strong></span><br>
    &emsp;&emsp;&emsp;&emsp;<span class="text-danger"><strong>costume2.SetSortingOrder("HairBack", mainCharacter.GetSortingOrder("RightArm") - 10);</strong></span><br>
    &emsp;&emsp;&emsp;&emsp;<span class="text-danger"><strong>costume2.SetSortingOrder("HairAcc", mainCharacter.GetSortingOrder("RightArm") - 11);</strong></span><br>
    &emsp;&emsp;&emsp;&emsp;<span class="text-danger"><strong>costume2.SetSortingOrder("HairTail", mainCharacter.GetSortingOrder("RightArm") - 12);</strong></span><br>
    &emsp;&emsp;}<br>
    <br>
    &emsp;&emsp;//의상 3(Costume3)을 Character Group의 자식으로 등록하고, 본체 캐릭터의 본 움직임과 동기화를 합니다.<br>
    &emsp;&emsp;private void <strong>AttachCostume3()</strong><br>
    &emsp;&emsp;{<br>
    &emsp;&emsp;&emsp;&emsp;//Character Group의 자식으로 등록하고, Local 위치를 초기화합니다.<br>
    &emsp;&emsp;&emsp;&emsp;costume3.transform.parent = characterGroup;<br>
    &emsp;&emsp;&emsp;&emsp;costume3.transform.localPosition = Vector3.zero;<br>
    <br>
    &emsp;&emsp;&emsp;&emsp;//Synchronize 함수를 이용하여 본 움직임을 동기화할 수 있습니다.<br>
    &emsp;&emsp;&emsp;&emsp;costume3.Synchronize(mainCharacter, false, false, true, SYNC_BONE_OPTION.MatchFromRoot, false);<br>
    <br>
    &emsp;&emsp;&emsp;&emsp;//의상 3 메시들의 렌더링 순서(Sorting Order)를 본체의 메시를 기준으로 수정합니다.<br>
    &emsp;&emsp;&emsp;&emsp;<span class="text-danger"><strong>costume3.SetSortingOrder("Hat", mainCharacter.GetSortingOrder("Head") + 2);</strong></span><br>
    &emsp;&emsp;&emsp;&emsp;<span class="text-danger"><strong>costume3.SetSortingOrder("HairFront", mainCharacter.GetSortingOrder("Head") + 1);</strong></span><br>
    &emsp;&emsp;&emsp;&emsp;<span class="text-danger"><strong>costume3.SetSortingOrder("LeftArmFront", mainCharacter.GetSortingOrder("LeftArm") + 4);</strong></span><br>
    &emsp;&emsp;&emsp;&emsp;<span class="text-danger"><strong>costume3.SetSortingOrder("LeftHand", mainCharacter.GetSortingOrder("LeftArm") + 3);</strong></span><br>
    &emsp;&emsp;&emsp;&emsp;<span class="text-danger"><strong>costume3.SetSortingOrder("RightArmFront", mainCharacter.GetSortingOrder("LeftArm") + 2);</strong></span><br>
    &emsp;&emsp;&emsp;&emsp;<span class="text-danger"><strong>costume3.SetSortingOrder("Neck", mainCharacter.GetSortingOrder("LeftArm") + 1);</strong></span><br>
    &emsp;&emsp;&emsp;&emsp;<span class="text-danger"><strong>costume3.SetSortingOrder("LeftArmBack", mainCharacter.GetSortingOrder("LeftArm") - 1);</strong></span><br>
    &emsp;&emsp;&emsp;&emsp;<span class="text-danger"><strong>costume3.SetSortingOrder("BodyFront", mainCharacter.GetSortingOrder("LeftLeg") + 3);</strong></span><br>
    &emsp;&emsp;&emsp;&emsp;<span class="text-danger"><strong>costume3.SetSortingOrder("Skirt", mainCharacter.GetSortingOrder("LeftLeg") + 2);</strong></span><br>
    &emsp;&emsp;&emsp;&emsp;<span class="text-danger"><strong>costume3.SetSortingOrder("LeftShoe", mainCharacter.GetSortingOrder("LeftLeg") + 1);</strong></span><br>
    &emsp;&emsp;&emsp;&emsp;<span class="text-danger"><strong>costume3.SetSortingOrder("RightShoe", mainCharacter.GetSortingOrder("RightLeg") + 1);</strong></span><br>
    &emsp;&emsp;&emsp;&emsp;<span class="text-danger"><strong>costume3.SetSortingOrder("BodyBack", mainCharacter.GetSortingOrder("RightLeg") - 1);</strong></span><br>
    &emsp;&emsp;&emsp;&emsp;<span class="text-danger"><strong>costume3.SetSortingOrder("RightHand", mainCharacter.GetSortingOrder("RightArm") + 1);</strong></span><br>
    &emsp;&emsp;&emsp;&emsp;<span class="text-danger"><strong>costume3.SetSortingOrder("RightArmBack", mainCharacter.GetSortingOrder("RightArm") - 1);</strong></span><br>
    &emsp;&emsp;&emsp;&emsp;<span class="text-danger"><strong>costume3.SetSortingOrder("HairBack", mainCharacter.GetSortingOrder("RightArm") - 10);</strong></span><br>
    &emsp;&emsp;}<br>
    }<br>
    <br>
    </p>
    </div>
    <br>
    
    <p>
    의상에 따라 메시들이 다르게 구성되므로, 메시의 Sorting Order를 지정하는 코드가 각각 다릅니다.<br>
    위 스크립트는 설명을 위해 러프하게 작성되었는데, 별도의 규칙을 만드는 등의 더 세련되게 스크립트를 작성하는 것도 가능할 것입니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1309.jpg"/>
    <br>
    
    <p>
    이제 유니티 씬으로 돌아와서 Sorting Order 옵션을 설정합니다.<br>
    <strong>(1)</strong> <strong>본체 캐릭터(MainCharacter)</strong>를 선택합니다.<br>
    <strong>(2)</strong> <strong>Sorting Order Option</strong>을 <strong>Depth To Order</strong>로 설정하고, <strong>Order Per Depth</strong>를 적당히 큰 값을 지정합니다. 여기서는 10을 지정했습니다. <br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1313.jpg"/>
    <br>
    
    <p>
    본 동기화를 이용하여 캐릭터의 의상을 교체하는 예제가 완성되었습니다!<br>
    </p>
    <br>
    
    <br>
    <br>
    <!-- 3. 서브 타이틀 -->
    <h3>본 동기화 조건과 옵션</h3>
    <br>
    
    <p>
    본의 동기화에 대한 특성은 다음과 같습니다.<br>
    - 본을 동기화하는 조건은 크게 <strong>이름</strong>과 <strong>구조</strong>입니다.<br>
    - 동기화를 하기 위해서는 동기화 대상이 되는 본들간의 이름이 같아야 합니다.<br>
    - 이름이 같은 경우 루트 본으로부터 <strong>부모-자식</strong> 구조가 동일해야합니다. 단 이것은 옵션에 따라 조금 다릅니다.<br>
    - 본의 위치, 형태, 크기는 동기화 조건에서 고려되지 않습니다.<br>
    - 우연히 이름이 같은 본들이 의도하지 않게 동기화 될 수 있으므로, 이름을 잘 설정해야 합니다.<br>
    - 기본적으로는 루트 본부터 동일한 구조를 가져야 합니다.<br>
    - 루트 유닛의 순서를 고려합니다. 같은 번호의 루트 유닛에 포함된 본들과 동기화를 시도합니다.<br>
    - 일부 동기화되지 않는 본이 있어도 됩니다.<br>
    </p>
    <br>
    
    <p>
    다만, 동기화의 옵션에 따라서 동기화 결과가 조금 다릅니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1381.jpg"/>
    <br>
    
    <p>
    동기화의 옵션에 따른 동기화 결과 차이에 대한 도식입니다.<br>
    Synchronize 함수의 인자인 SYNC_BONE_OPTION 값에 따라서 동기화 결과가 바뀝니다.<br>
    - <strong>MatchFromRoot</strong> : 루트 본부터 동일한 구조를 가져야 동기화가 됩니다.<br>
    - <strong>MatchFromSubBones</strong> : 동기화 되는 본들 중 루트 본이 대상 캐릭터의 루트 본이 아니더라도 동기화가 됩니다. 위의 경우 <strong>Arm1 > Arm2 > Hand</strong>의 경우가 이에 해당됩니다. (반대로는 동기화되지 않습니다.)<br>
    </p>
    <br>
    
    <!-- 12. 참고 박스 시작 -->
    <div class="alert alert-info" role="alert">
    
    <!-- 4. 버전 설명 -->
    <h4><span class="badge badge-secondary">1.3.5</span></h4>
    
    <p>
    여러개의 텍스쳐 아틀라스(Atlas)를 이용하는 경우 <strong>드로우콜(Draw Call)</strong>이 크게 증가할 수 있습니다.<br>
    공통의 텍스쳐를 이용하는 방법이나 별도의 최적화 기법이 필요합니다.<br>
    <strong>재질 병합</strong> 기능을 이용해보세요. (<a href="../../kr/AdvancedManual/AD_MergeMaterials.html">해당 페이지로 이동</a>)<br>
    </p>
    <br>
    
    </div>
    <br>
    <br>
    
    <!-- 5. 바닥 네비바 -->
    <br>
    <br>
    <br>
    <br>
    <nav class="navbar fixed-bottom navbar-light bg-light">
        <a class="btn btn-light" role="button" href="../../kr/AdvancedManual/AD_SynchronizeWithOthers.html">< 다른 캐릭터와 동기화된 재생</a>
        <a class="btn btn-light" role="button" href="../../kr/AdvancedManual/AD_SortingOrderInAttachMesh.html">메시 부착시의 Sorting Order 설정 ></a>
    </nav>
    
    <!-- 페이지 내용 끝! -->

    
    <!-- 종료 -->
    </div>

    <!-- 부트스트랩 -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script type="text/javascript" src="../../js/bootstrap.js"></script>
    <!--------------->

    </body>
</html>
