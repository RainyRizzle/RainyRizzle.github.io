<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <!-- 제목 -->
        <title>투과(See-Through) 효과</title>
        <!-- 파비콘 -->
        <link rel="shortcut icon" href="../../Images/favicon.ico"/>
        <!-- 부트스트랩 -->
        <link rel="stylesheet" href="../../css/bootstrap.css">
        <!--------------->

    </head>

    <body>
        <p>
            <nav class="navbar fixed-top navbar-expand-lg navbar-dark bg-dark">
            <!--로고 : AnyPortrait 홈페이지로 가야한다. (언어별)-->
            <a class="navbar-brand" href="https://www.rainyrizzle.com/anyportrait-kor">
                <img src="../../Images/AP_Logo.png" width="150" height="30" class="d-inline-block align-top" alt="">
            </a>

            <!--메뉴들 : 현재 페이지의 카테고리에 active 붙인다. (언어별 링크) -->
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarText">
                <ul class="navbar-nav mr-auto">
                <li class="nav-item">
                    <a class="nav-link" href="../../kr/GettingStarted.html">시작하기</a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="../../kr/AdManual.html">메뉴얼</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="../../kr/Script.html">스크립트</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="https://www.rainyrizzle.com/ap-videotutorial-kor">동영상</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="https://www.rainyrizzle.com/ap-forum">게시판</a>
                </li>

                </ul>

                <!-- 언어 변경. 현재 페이지의 주소에서 언어 주소만 변경한다. (해당 언어에 active) -->
                <div class="btn-group mr-2" role="group" aria-label="Basic example">
                    <a role="button" class="btn btn-secondary" href="../../en/AdvancedManual/AD_SeeThrough.html">EN</a>
                    <a role="button" class="btn btn-secondary active" href="../../kr/AdvancedManual/AD_SeeThrough.html">KR</a>
                    <a role="button" class="btn btn-secondary" href="../../jp/AdvancedManual/AD_SeeThrough.html">JP</a>
                </div>

                <!-- 여백 -->
                <p></p>

                <!-- 검색버튼 -->
                <form class="form-inline">
                    <a class="btn btn-light" role="button" href="../../kr/Search.html">검색</a>
                </form>
            </div>
        </nav>
    </p>

    <!-- 실제 바디 부분 -->
    <div class="container">
    <br>
    <br>
    <!-- 여기에 내용을 적어주세요 -->

    <!-- 여기서부터 페이지 내용이 작성됩니다. -->
    <!-- 1. 페이지 진입 경로 -->
    <p><a href="https://www.rainyrizzle.com/anyportrait-kor"><span class="text-dark">AnyPortrait</span></a> > <a href="../../kr/AdManual.html"><span class="text-dark">메뉴얼</span></a> > 투과(See-Through) 효과</p>
    
    <!-- 2. 페이지 메인 타이틀 -->
    <h1 class="display-5">투과(See-Through) 효과</h1>
    <br>
    
    <!-- 4. 버전 설명 -->
    <h4><span class="badge badge-secondary">1.6.0</span></h4>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_2192.jpg"/>
    <br>
    
    <p>
    "앞 머리카락이 한쪽 눈을 가린 캐릭터 일러스트"입니다.<br>
    이러한 디자인의 캐릭터를 예쁘게 표현하고자 할 때, 가운데 그림처럼, "<strong>머리카락에 눈이 살짝 비쳐보이는 만화적 연출</strong>"을 활용하곤 합니다.<br>
    </p>
    <br>
    
    <p>
    이것을 AnyPortrait를 포함한 애니메이션 툴에서 어떻게 표현해야할 지 고민해봅시다.<br>
    가장 쉬운 방법은 "머리카락" 레이어의 일부를 약간 투명하게 만드는 것입니다.<br>
    하지만 의도했던 것(가운데 그림)과 머리카락을 조금 투명하게 만든 결과(오른쪽 그림)는 확연하게 차이가 있습니다.<br>
    "머리카락" 레이어가 반투명해지면, "눈" 레이어 뿐만 아니라 "얼굴", "다른 머리카락" 레이어들이 모두 투과되어 보이면서 다소 지저분하게 표현이 됩니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_2193.jpg"/>
    <br>
    
    <p>
    사실, 이것을 구현하는 것은 생각보다 쉽지 않습니다.<br>
    "눈" 레이어가 "머리카락" 레이어보다 뒤쪽에 위치한 상태에서, 불투명한 "머리카락"보다 앞에서 렌더링될 수 없기 때문입니다.<br>
    이때, <strong>AnyPortrait v1.6.0</strong>에 추가된 <strong>투과 효과(See-Through)</strong>를 이용하면 의도한 것을 표현할 수 있습니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_2191.jpg"/>
    <br>
    
    <p>
    개선된 <strong>마스크</strong> 기능에서는 렌더 텍스쳐를 생성할 때 기존의 "<strong>알파 마스크 쉐이더(Alpha Mask Shader)</strong>" 대신 "<strong>일반 쉐이더 (Normal Shader)</strong>"를 이용할 수도 있습니다.<br>
    쉐이더가 변경되면 화면에 출력되는 것과 유사하게 렌더 텍스쳐에 렌더링이 됩니다.<br>
    이어서, 이 렌더 텍스쳐를 대상 메시로 전달할 때, "Alpha 채널에서의 알파 클리핑 연산"이 아닌 "<strong>RGB 채널의 색상 보간 연산</strong>"을 하도록 설정합니다.<br>
    이 방식으로 <strong>마스크</strong> 기능을 활용하면 <strong>투과 효과(See-Through)</strong>를 만들 수 있습니다.<br>
    </p>
    <br>
    
    <p>
    <span class="text-danger"><strong>참고</strong></span><br>
    이 페이지에서 소개하는 예시에서는 <strong>투과 효과</strong> 뿐만 아니라, <strong>공유 텍스쳐</strong>, <strong>마스크 쉐이더 변경</strong> 및 <strong>마스크 체인</strong>이 모두 활용됩니다.<br>
    이에 대한 자세한 설명은 다음의 메뉴얼에서 확인하세요.<br>
    - <a href="../../kr/AdvancedManual/AD_Mask.html">마스크</a><br>
    - <a href="../../kr/AdvancedManual/AD_MaskCustomShader.html">마스크와 커스텀 쉐이더</a><br>
    - <a href="../../kr/AdvancedManual/AD_MaskChain.html">마스크 체인</a><br>
    </p>
    <br>
    
    <!-- 12. 참고 박스 시작 -->
    <div class="alert alert-info" role="alert">
    
    <p>
    <strong>투과 효과</strong>의 처리 결과와 일반적인 <strong>클리핑 마스크</strong>의 처리 결과는 서로 반대인 것처럼 보입니다.<br>
    <strong>투과 효과</strong>에서는 마스크를 생성하는 메시가 오히려 클리핑되어 렌더링되는 것처럼 보이기 때문입니다.<br>
    그래서 <strong>투과 효과</strong>를 "클리핑 마스크의 변형"보다는, "마스크의 작동 방식을 활용한 예시"로 보는 것이 좋습니다.<br>
    </p>
    <br>
    
    </div>
    <br>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_2194.jpg"/>
    <br>
    
    <p>
    캐릭터 일러스트를 AnyPortrait 에디터에 가져온 화면입니다.<br>
    여러 "<strong>Eye</strong>..." 메시들이 4개의 "<strong>Front Hair</strong>..." 메시들에 비쳐보이도록 만들어봅시다.<br>
    그 전에, "<strong>Eye Iris L/R</strong>" 메시들은 "<strong>Eye White L/R</strong>" 메시로의 클리핑이 설정되어 있다는 점도 같이 체크해주세요.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_2195.jpg"/>
    <br>
    
    <p>
    <strong>(1)</strong> "<strong>Eye</strong>..." 메시들 중 하나를 선택합니다.<br>
    <strong>(2)</strong> <strong>Open Mask Settings</strong> 버튼을 누릅니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_2196.jpg"/>
    <br>
    
    <p>
    <strong>(1)</strong> <strong>Add Mask</strong> 버튼을 누릅니다.<br>
    <strong>(2)</strong> 투과 효과를 적용할 "<strong>Eye</strong>" 메시들을  <kbd>Ctrl</kbd>  키를 눌러서 모두 선택합니다.<br>
    <strong>(3)</strong> <strong>Select</strong> 버튼을 누릅니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_2197.jpg"/>
    <br>
    
    <p>
    선택된 "<strong>Eye</strong>" 메시들에 대한 <strong>마스크 데이터</strong>들이 생성되었습니다.<br>
    <strong>(1)</strong> <strong>마스크 데이터</strong>들 중 하나를 선택합니다.<br>
    <strong>(2)</strong> <strong>Shader Type</strong>의 값을 "<strong>Main Texture With Color</strong>"로 변경합니다.<br>
    이 옵션의 값은 화면에 렌더링하는 것과 동일한 쉐이더로 마스크 렌더 텍스쳐를 렌더링하도록 만듭니다.<br>
    </p>
    <br>
    
    <!-- 12. 참고 박스 시작 -->
    <div class="alert alert-info" role="alert">
    
    <p>
    유니티 2023 및 이후 버전의 프로젝트에서 렌더 파이프라인이 <strong>URP</strong>으로 설정되어 있다면, "<strong>Main Texture With Color</strong>" 옵션이 정상적으로 동작하지 않습니다.<br>
    이 이슈에 대한 설명과 해결 방법은 <a href="../../kr/AdvancedManual/AD_MaskCustomShader.html">관련 페이지</a>에서 확인해보세요.<br>
    </p>
    <br>
    
    </div>
    <br>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_2198.jpg"/>
    <br>
    
    <p>
    <strong>(1)</strong> 앞서 확인한 것처럼, "<strong>Eye Iris L/R</strong>" 메시들이 "<strong>Eye White L/R</strong>" 메시로부터 클리핑이 되고 있었기 때문에 <strong>마스크 체인</strong> 및 <strong>렌더 순서 문제</strong>가 발생하고 말았습니다. (<a href="../../kr/AdvancedManual/AD_MaskChain.html">관련 페이지</a>)<br>
    <strong>(2)</strong> 렌더 순서 문제를 해결하기 위해서 선택된 <strong>마스크 데이터</strong>의 <strong>Render Order</strong>의 값을 "<strong>Phase 2</strong>"로 변경합니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_2199.jpg"/>
    <br>
    
    <p>
    렌더 텍스쳐 생성 옵션을 위와 같이 변경합니다.<br>
    - <strong>Texture Size</strong>를 꽤 큰 값으로 변경합니다. <strong>마스크 체인</strong>이 발생하거나 <strong>공유 텍스쳐</strong>를 이용할 때는 마스크 품질을 위해서 높은 해상도를 설정하는 것을 고려해야합니다.<br>
    - <strong>Shared Texture</strong>를 활성화하고 <strong>ID</strong>를 지정합니다. "<strong>Eye</strong>" 메시들이 공통의 렌더 텍스쳐로 렌더링을 하도록 만들기 위함입니다. (여기서는 <strong>ID</strong> 값으로서 "<strong>0</strong>"을 입력했습니다.)<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_2200.jpg"/>
    <br>
    
    <p>
    <strong>(1)</strong> <strong>Add Destination</strong> 버튼을 누릅니다.<br>
    <strong>(2)</strong> 모든 "<strong>Front Hair</strong>..." 메시들을  <kbd>Ctrl</kbd>  키를 눌러서 모두 선택합니다.<br>
    <strong>(3)</strong> <strong>Select</strong> 버튼을 누릅니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_2201.jpg"/>
    <br>
    
    <p>
    <strong>(1)</strong> <strong>Add Property</strong> 버튼을 누릅니다.<br>
    <strong>(2)</strong> 추가된 프로퍼티의 프리셋 타입을 "<strong>See Through Preset</strong>"으로 변경합니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_2202.jpg"/>
    <br>
    
    <p>
    투과 효과 프리셋에서는 보조 파라미터로서 "<strong>투과율</strong>"을 설정할 수 있습니다.<br>
    <strong>(1)</strong> <strong>Float</strong>형 추가 파라미터에 "<strong>0~1</strong>" 사이의 값(여기서는 "<strong>0.5</strong>")을 입력합니다.<br>
    </p>
    <br>
    
    <p>
    이제 <strong>투과 효과</strong>를 위한 <strong>마스크 데이터</strong> 설정은 완료되었습니다.<br>
    이 예제에서는 여러개의 "<strong>Eye</strong>..." 메시들이 한꺼번에 투과가 되어야 합니다.<br>
    따라서 다른 <strong>마스크 데이터</strong>들이 동일한 <strong>공유 텍스쳐</strong>로 렌더링을 하도록 설정을 이어서 합시다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_2203.jpg"/>
    <br>
    
    <p>
    <strong>(1)</strong> 다른 <strong>마스크 데이터</strong>를 선택합니다.<br>
    <strong>(2)</strong> <strong>Shared Texture</strong>를 체크하고 <strong>ID</strong> 항목에 동일한 값(여기서는 "<strong>0</strong>")을 입력합니다.<br>
    나머지 모든 <strong>마스크 데이터</strong>에도 동일하게 설정합니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_2204.jpg"/>
    <br>
    
    <p>
    <strong>(1)</strong> 모든 <strong>마스크 데이터</strong>의 <strong>공유 텍스쳐</strong>를 설정하는 작업이 완료되면 위와 같이 수많은 경고 아이콘이 보여질 수 있습니다.<br>
    <strong>Shared Texture</strong> 옵션 외에도 아직 <strong>Shader Type</strong>이나 <strong>Render Order</strong> 등의 옵션이 아직 동기화되지 않았기 때문입니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_2205.jpg"/>
    <br>
    
    <p>
    <strong>(1)</strong> 처음에 선택했던 <strong>마스크 데이터</strong>를 다시 선택합니다.<br>
    <strong>(2)</strong> <strong>Sync Shared Texture Options</strong> 버튼을 누릅니다.<br>
    <strong>(3)</strong> 메시지가 나타나면 <strong>Sync All Options</strong> 버튼을 누릅니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_2206.jpg"/>
    <br>
    
    <p>
    모든 "<strong>Eye</strong>..." 메시의 <strong>마스크 데이터</strong>들의 투과 효과 설정이 완료되었습니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_2207.jpg"/>
    <br>
    
    <p>
    <strong>마스크 설정 다이얼로그</strong>를 닫고 결과를 확인해봅시다.<br>
    눈 메시들이 앞 머리카락을 투과하여 렌더링되는 것을 볼 수 있습니다.<br>
    투과율에 <strong>0.5</strong>를 입력했기 때문에, <strong>50%</strong> 정도 투과되고 있습니다.<br>
    </p>
    <br>
    
    <p>
    투과율을 고정값이 아닌 <strong>컨트롤 파라미터</strong>를 이용하여 제어하는 방법도 알아봅시다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_2208.jpg"/>
    <br>
    
    <p>
    <strong>(1)</strong> 새로운 <strong>컨트롤 파라미터</strong>를 생성합니다.<br>
    <strong>(2)</strong> 컨트롤 파라미터의 이름을 설정하고 <strong>Float</strong> 타입으로 설정합니다.<br>
    <strong>(3)</strong> 값 범위를 "<strong>0 ~ 1</strong>"로 설정합니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_2209.jpg"/>
    <br>
    
    <p>
    <strong>(1)</strong> <strong>마스크 설정 다이얼로그</strong>를 열고 프로퍼티를 가진 <strong>마스크 데이터</strong>를 선택합니다.<br>
    <strong>(2)</strong> 프로퍼티의 옵션 중 <strong>Control Parameter</strong>를 체크하고 <strong>Set</strong> 버튼을 누릅니다.<br>
    <strong>(3)</strong> 앞서 만든 <strong>컨트롤 파라미터</strong>를 선택합니다.<br>
    <strong>(4)</strong> <strong>Select</strong> 버튼을 누릅니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_2210.jpg"/>
    <br>
    
    <p>
    <strong>(1)</strong> 이제 <strong>컨트롤 파라미터</strong>에 따라서 <strong>(2)</strong> "<strong>Eye</strong>..." 메시의 투과율이 바뀌는 것을 볼 수 있습니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_2211.jpg"/>
    <br>
    
    <p>
    <strong>Bake</strong>를 하고 유니티 씬에서 확인해봅시다.<br>
    <strong>컨트롤 파라미터</strong>를 조절하여 캐릭터의 눈이 머리카락을 투과하여 렌더링되는 것을 볼 수 있습니다.<br>
    </p>
    <br>
    
    <!-- 5. 바닥 네비바 -->
    <br>
    <br>
    <br>
    <br>
    <nav class="navbar fixed-bottom navbar-light bg-light">
        <a class="btn btn-light" role="button" href="../../kr/AdvancedManual/AD_OnlyMaskMesh.html">< 마스크 전용 메시</a>
        <a class="btn btn-light" role="button" href="../../kr/AdvancedManual/AD_URPOutlineShader.html">URP 외곽선 쉐이더 만들기 ></a>
    </nav>
    
    <!-- 페이지 내용 끝! -->

    
    <!-- 종료 -->
    </div>

    <!-- 부트스트랩 -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script type="text/javascript" src="../../js/bootstrap.js"></script>
    <!--------------->

    <!-- 클립보드 스크립트 -->
<!-- NO SCRIPT -->
    <!--------------->

    </body>
</html>
