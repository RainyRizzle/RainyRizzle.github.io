<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <!-- 제목 -->
        <title>낮은 FPS로 재생하기</title>
        <!-- 파비콘 -->
        <link rel="shortcut icon" href="../../Images/favicon.ico"/>
        <!-- 부트스트랩 -->
        <link rel="stylesheet" href="../../css/bootstrap.css">
        <!--------------->

    </head>

    <body>
        <p>
            <nav class="navbar fixed-top navbar-expand-lg navbar-dark bg-dark">
            <!--로고 : AnyPortrait 홈페이지로 가야한다. (언어별)-->
            <a class="navbar-brand" href="https://www.rainyrizzle.com/anyportrait-kor">
                <img src="../../Images/AP_Logo.png" width="150" height="30" class="d-inline-block align-top" alt="">
            </a>

            <!--메뉴들 : 현재 페이지의 카테고리에 active 붙인다. (언어별 링크) -->
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarText">
                <ul class="navbar-nav mr-auto">
                <li class="nav-item">
                    <a class="nav-link" href="../../kr/GettingStarted.html">시작하기</a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="../../kr/AdManual.html">메뉴얼</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="../../kr/Script.html">스크립트</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="https://www.rainyrizzle.com/ap-videotutorial-kor">동영상</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="https://www.rainyrizzle.com/ap-forum">게시판</a>
                </li>

                </ul>

                <!-- 언어 변경. 현재 페이지의 주소에서 언어 주소만 변경한다. (해당 언어에 active) -->
                <div class="btn-group mr-2" role="group" aria-label="Basic example">
                    <a role="button" class="btn btn-secondary" href="../../en/AdvancedManual/AD_PlayLowFPS.html">EN</a>
                    <a role="button" class="btn btn-secondary active" href="../../kr/AdvancedManual/AD_PlayLowFPS.html">KR</a>
                    <a role="button" class="btn btn-secondary" href="../../jp/AdvancedManual/AD_PlayLowFPS.html">JP</a>
                </div>

                <!-- 여백 -->
                <p></p>

                <!-- 검색버튼 -->
                <form class="form-inline">
                    <a class="btn btn-light" role="button" href="../../kr/Search.html">검색</a>
                </form>
            </div>
        </nav>
    </p>

    <!-- 실제 바디 부분 -->
    <div class="container">
    <br>
    <br>
    <!-- 여기에 내용을 적어주세요 -->

    <!-- 여기서부터 페이지 내용이 작성됩니다. -->
    <!-- 1. 페이지 진입 경로 -->
    <p><a href="https://www.rainyrizzle.com/anyportrait-kor"><span class="text-dark">AnyPortrait</span></a> > <a href="../../kr/AdManual.html"><span class="text-dark">메뉴얼</span></a> > 낮은 FPS로 재생하기</p>
    
    <!-- 2. 페이지 메인 타이틀 -->
    <h1 class="display-5">낮은 FPS로 재생하기</h1>
    <br>
    
    <!-- 4. 버전 설명 -->
    <h4><span class="badge badge-secondary">1.4.7</span></h4>
    
    <p>
    TV나 극장에서 상영되는 애니메이션을 보면 낮은 프레임에서 재생되는 것을 볼 수 있습니다.<br>
    손으로 일일이 그렸던 고전적인 제작 방식으로 인한 한계이겠지만, 그 낮은 프레임이 갖는 매력을 모두가 한번씩은 느껴봤을 것입니다.<br>
    AnyPortrait는 원래 게임을 목표로 개발되었기 때문에, 게임 중에는 매프레임마다 애니메이션에 의해 메시들이 갱신되지만, <br>
    만약 애니메이션의 <strong>FPS (Frames per second)</strong>를 줄여서 마치 고전적인 애니메이션과 같이 재생된다면 재미있는 연출을 할 수 있을 것입니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1889.jpg"/>
    <br>
    
    <p>
    게임은 최대한 높은 FPS로 동작하기 때문에, 낮은 FPS로 애니메이션을 재생하고자 한다면 위와 같이 처리를 해야할 것입니다.<br>
    <strong>(1)</strong> 기본적으로는 게임의 매 프레임마다 애니메이션에 맞게 메시들이 갱신이 될 것입니다.<br>
    <strong>(2)</strong> 낮은 FPS로 애니메이션을 재생하기 위해서는 게임의 특정 프레임에서는 메시가 갱신이 되고, 그 외의 프레임에서는 갱신이 되지 않은채 이전 상태가 유지가 되어야 할 것입니다.<br>
    즉, "메시가 갱신되는 빈도"를 조절하는 것이 낮은 FPS로 애니메이션을 재생하기 위한 접근법입니다.<br>
    이 페이지에서는 "<strong>메시 갱신 빈도 (Mesh Update Frequency)</strong>" 옵션을 이용하여 FPS를 줄이는 방법에 대해서 다룹니다.<br>
    </p>
    <br>
    
    <br>
    <br>
    <!-- 3. 서브 타이틀 -->
    <h3>메시 갱신 빈도 옵션 설정하기</h3>
    <br>
    
    <p>
    AnyPortrait v1.4.7에서 추가된 "<strong>메시 갱신 빈도 (Mesh Update Frequency)</strong>" 옵션을 이용하면 애니메이션의 FPS를 조절할 수 있습니다.<br>
    이 옵션을 변경할 수 있는 3가지 방법을 이용해보세요.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1877.jpg"/>
    <br>
    
    <p>
    첫번째 방법은 "<strong>Bake 다이얼로그</strong>"에서 옵션을 설정하는 것입니다.<br>
    <strong>(1)</strong> <strong>Bake</strong> 버튼을 눌러서 Bake 다이얼로그를 엽니다.<br>
    <strong>(2)</strong> <strong>Setting</strong> 탭을 선택합니다.<br>
    <strong>(3)</strong> <strong>Mesh Update Frequency</strong> 옵션의 값을 변경합니다.<br>
    </p>
    <br>
    
    <p>
    다음의 3개의 방식의 옵션들이 있습니다.<br>
    - <strong>Every Frame</strong> : 매프레임마다 매시들이 갱신됩니다. (기본값)<br>
    - <strong>Per Time (Not Sync)</strong> : 낮은 FPS로 메시들이 갱신됩니다.<br>
    - <strong>Per Time (Sync)</strong> : 낮은 FPS로 메시들이 갱신되며, 같은 옵션의 캐릭터들간의 메시 갱신 타이밍이 동기화됩니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1878.jpg"/>
    <br>
    
    <p>
    <strong>Every Frame</strong>을 제외한 나머지 두개의 옵션이 이 페이지에서 다루는 <strong>낮은 FPS로 재생</strong>하기 위한 설정입니다.<br>
    위와 같이 <strong>Per Time (Not Sync)</strong> (또는 <strong>Per Time (Sync)</strong>)를 설정하면 어느 FPS로 재생할지를 설정하는 "<strong>FPS</strong>" 옵션이 추가로 등장합니다.<br>
    여기서 일반적인 영상 재생률인 60보다 낮은 값을 입력하면 고전 애니메이션같은 느낌을 줄 수 있을 것입니다.<br>
    </p>
    <br>
    
    <p>
    <span class="text-danger"><strong>주의</strong></span><br>
    FPS 옵션값으로서 <span class="text-danger"><strong>최대 30 FPS</strong></span>의 값만 입력할 수 있습니다.<br>
    일반적인 화면 재생률인 "60 FPS"를 기준으로, 만약 "<strong>30~60 FPS 사이의 값</strong>"을 입력하게 된다면, "연속적으로 재생되는 프레임"과 "쉬어가는 프레임"이 번갈아가면서 처리될 것입니다.<br>
    이것은 좋은 결과를 보여주지 못하기 때문에, 최대 <strong>30 FPS</strong>으로 제한되어야 합니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1879.jpg"/>
    <br>
    
    <p>
    두번째 방법은 "<strong>Inspector UI</strong>"에서 설정하는 것입니다.<br>
    <strong>(1)</strong> 유니티 씬에서 캐릭터를 선택합니다.<br>
    <strong>(2)</strong> "<strong>기본 설정(General Properties)</strong>" 탭을 선택합니다.<br>
    <strong>(3)</strong> Bake 다이얼로그와 동일하게 <strong>Mesh Update Frequency</strong> 옵션을 설정합니다.<br>
    </p>
    <br>
    
    <p>
    세번째 방법은 <strong>스크립트</strong>를 이용하는 것입니다.<br>
    apPortrait의 다음의 함수를 이용해보세요. (<a href="../../kr/Script/SC_Init.html">스크립트 설명 페이지</a>)<br>
    </p>
    <br>
    
    <p>
    <strong>1.</strong> <span class="text-primary">public</span> <span class="text-primary">void</span> <strong>SetUpdateMeshesEveryFrame</strong><strong>()</strong><br>
    : 메시 갱신 빈도를 "<strong>Every Frame</strong>"으로 설정합니다.<br>
    </p>
    <br>
    
    <p>
    <strong>2.</strong> <span class="text-primary">public</span> <span class="text-primary">void</span> <strong>SetUpdateMeshesPerTime</strong>(<span class="text-primary">int</span> fps, <span class="text-primary">bool</span> isSyncUpdate)<br>
    : 메시 갱신 빈도를 "<strong>Per Time</strong>"으로 설정합니다.<br>
    - <span class="text-primary">int</span> fps : 재생 빈도에 해당하는 FPS 값입니다. 30이하의 값을 입력해주세요.<br>
    - <span class="text-primary">bool</span> isSyncUpdate : true를 입력하면 다른 캐릭터와 메시 갱신 타이밍이 동기화됩니다.<br>
    </p>
    <br>
    
    <p>
    이 옵션들을 이용하여 애니메이션의 FPS를 조절한 결과를 다음의 동영상으로 확인해보세요!<br>
    각각의 옵션과 주요 FPS에 대해서 비교하면서 볼 수 있습니다.<br>
    <strong>Per Time</strong> 옵션의 경우, 동기화 여부의 차이도 같이 확인해보세요.<br>
    </p>
    <br>
    
    <!-- 11. 유튜브 영상 -->
    <div class="embed-responsive embed-responsive-16by9 mx-auto d-block" style="max-width: 60%;">
        <iframe class="embed-responsive-item" src="https://www.youtube.com/embed/27Hr6HT6Fus" allowfullscreen></iframe>
    </div>
    <br>
    
    <br>
    <br>
    <!-- 3. 서브 타이틀 -->
    <h3>Important 옵션과 성능 비교</h3>
    <br>
    
    <p>
    AnyPortrait의 "<strong>Important</strong>" 옵션도 재생 빈도, 즉 FPS와 관련된 옵션입니다. (<a href="../../kr/AdvancedManual/AD_ImportantOption.html">관련 페이지</a>)<br>
    최적화를 위해서 <strong>Important</strong> 옵션을 <span class="text-danger"><strong>비활성화</strong></span> 할 수 있고, 간헐적인 업데이트를 위한 FPS를 설정할 수 있습니다.<br>
    따라서 "<strong>Important 옵션 비활성화</strong>"와 "<strong>메시 갱신 빈도의 Per Time 옵션</strong>"은 얼핏 같은 것처럼 보입니다.<br>
    하지만 이 두가지 옵션은 완전히 다른 목적으로 개발되었기 때문에 다음과 같은 차이점이 있습니다.<br>
    </p>
    <br>
    
    <p>
    <strong>1. Important 옵션</strong><br>
    이 기능은 최적화를 위해서 제공되는 옵션입니다. (Important 옵션을 비활성화하는 경우)<br>
    수많은 캐릭터들이 씬에 등장하는 경우, 비교적 덜 중요한 캐릭터들의 연산을 분산시키는 역할을 수행합니다.<br>
    게임의 상태에 맞게 FPS가 조절되며, 연산이 특정 프레임에 모이지 않도록 분산시킵니다.<br>
    상황에 따라선 지정된 FPS보다 훨씬 낮은 FPS에서 업데이트되기도 합니다.<br>
    또한, 업데이트가 간헐적으로 동작함에 따라 연산 오류가 예상되며 실제로도 무거운 성능의 "물리 기능(Jiggle Bone, Physics Modifier)"은 아예 비활성화됩니다.<br>
    </p>
    <br>
    
    <p>
    <strong>2. 메시 갱신 빈도 옵션</strong><br>
    이 기능은 오직 시각적인 연출을 위한 기능이며, 성능 최적화를 위한 기능이 아닙니다.<br>
    대신 Important 옵션 여부와 다르게 모든 옵션에서 물리 기능 등이 동작한다는 특징이 있습니다.<br>
    </p>
    <br>
    
    <p>
    두가지 옵션에서 가장 큰 차이를 보이는 것은 성능입니다.<br>
    다음의 프로파일링 결과를 통해서 차이점을 확인해봅시다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1880.jpg"/>
    <br>
    
    <p>
    위와 같이 캐릭터를 50번 복제한 후 재생하는 씬을 구성했습니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1881.jpg"/>
    <br>
    
    <p>
    먼저 <strong>Important 옵션이 켜진 상태</strong>에서 <strong>메시 갱신 빈도</strong> 옵션을 <strong>Every Frame</strong>으로 설정했습니다.<br>
    이 상태는 AnyPortrait의 기본값이기도 합니다.<br>
    게임을 실행하면 프로파일러를 통해서 게임이 대략 30 FPS 정도를 기록하는 것을 볼 수 있습니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1882.jpg"/>
    <br>
    
    <p>
    다음은 <strong>Important 옵션이 켜진 상태</strong>에서 <strong>메시 갱신 빈도</strong> 옵션을 <strong>Per Time (Sync - 12FPS)</strong>으로 설정했습니다.<br>
    게임을 실행하면 30 FPS에서 60 FPS 사이의 성능값이 큰 편차와 함께 기록됩니다.<br>
    평균 프레임은 조금 향상된 것처럼 보이지만 편차가 크기 때문에 체감되는 성능 향상은 크지 않을 것입니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1883.jpg"/>
    <br>
    
    <p>
    마지막으로 <strong>Important 옵션을 끈 상태</strong>입니다. (이 상태에서는 메시 갱신 빈도 옵션이 적용되지 않습니다.)<br>
    게임의 성능이 비약적으로 상승되는 것을 볼 수 있습니다.<br>
    캐릭터의 연산들이 분산되었기 때문에 성능 편차가 크지 않는 것도 같이 볼 수 있습니다.<br>
    다만, 게임의 성능을 위해서 캐릭터들 각각의 애니메이션의 FPS는 크게 낮아집니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1884.jpg"/>
    <br>
    
    <p>
    프로파일링 결과를 위와 같이 정리할 수 있습니다.<br>
    </p>
    <br>
    
    <br>
    <br>
    <!-- 3. 서브 타이틀 -->
    <h3>메시 갱신 빈도 옵션의 작동 원리</h3>
    <br>
    
    <p>
    메시 갱신 빈도 옵션이 간헐적인 애니메이션 프레임을 가진다는 점에서 성능 향상이 크지 않는 것은 의아해보일 수 있습니다.<br>
    다음의 설명은 이 기능에 대해 더 자세히 이해해는데 도움이 될 것입니다.<br>
    앞선 프로파일링 실험을 참고하면서 읽어보세요.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1885.jpg"/>
    <br>
    
    <p>
    AnyPortrait는 게임이 실행될 때 위와 같은 순서로 업데이트가 됩니다.<br>
    먼저 애니메이션, 모디파이어 등이 일괄적으로 연산이 됩니다.<br>
    그리고 그 연산 결과가 메시에 반영이 되어, 메시의 외형이 변경됩니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1886.jpg"/>
    <br>
    
    <p>
    그리고 이 과정은 게임의 매 프레임마다 수행이 됩니다.<br>
    기본 설정(<strong>Important가 활성화</strong>되고 메시 갱신 빈도 옵션이 <strong>Every Frame</strong>으로 설정된 상태)이 이 경우에 해당됩니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1887.jpg"/>
    <br>
    
    <p>
    여기서 <strong>메시 갱신 빈도</strong> 옵션을 <strong>Per Time</strong>으로 변경하여 낮은 FPS로 애니메이션을 재생하면 위와 같이 처리 방식이 변경됩니다.<br>
    애니메이션과 모디파이어의 연산은 매 프레임마다 수행되는 반면, 메시의 외형을 갱신하는 연산이 불연속적으로 수행됩니다.<br>
    메시가 갱신되지 않는 프레임에도 애니메이션과 모디파이어는 계속해서 업데이트되기 때문에 물리 기능이나 다른 애니메이션 플레이, 메시의 가시성 여부 전환, 외부에서 캐릭터 제어하기 등의 경우에도 빠르게 반응할 준비가 되어있습니다.<br>
    즉, 겉보기와 다르게 계속해서 기민하게 연산이 이루어져서 게임 시스템에 영향을 주지 않습니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_1888.jpg"/>
    <br>
    
    <p>
    마지막으로 <strong>Important 옵션을 비활성화</strong>한 경우입니다.<br>
    이 기능은 메시 갱신을 비롯하여 애니메이션과 모디파이어의 연산까지 모두 간헐적으로 수행합니다.<br>
    성능 제어를 위한 일부 연산만 매 프레임 동작할 뿐이며, 대부분의 연산이 불연속적으로 수행되기 때문에 성능 향상에 큰 도움이 됩니다.<br>
    하지만 연산이 이루어지지 않는 과정에서의 기민한 반응을 하기가 어려우며, 물리 기능과 같이 연속적인 연산 처리가 불가하다는 단점이 있습니다.<br>
    </p>
    <br>
    
    <p>
    이 차이점들을 확인하여, 필요에 맞는 옵션을 사용하시면 되겠습니다.<br>
    </p>
    <br>
    
    <!-- 12. 참고 박스 시작 -->
    <div class="alert alert-info" role="alert">
    
    <p>
    메시 갱신 옵션을 <strong>Per Time</strong>으로 설정할 경우, 다음의 특징들을 가집니다.<br>
    - 루트 유닛, 메시의 가시성, 객체의 크기 반전 여부의 변경이 발생하면 옵션에 관계없이 즉시 메시가 갱신이 됩니다.<br>
    - 본은 연속적으로 업데이트되기 때문에 소켓(Socket) 역시 옵션에 관계없이 매 프레임 이동합니다.<br>
    </p>
    <br>
    
    </div>
    <br>
    <br>
    
    <!-- 5. 바닥 네비바 -->
    <br>
    <br>
    <br>
    <br>
    <nav class="navbar fixed-bottom navbar-light bg-light">
        <a class="btn btn-light" role="button" href="../../kr/AdvancedManual/AD_ImportantOption.html">< Important 옵션과 다수의 객체</a>
        <a class="btn btn-light" role="button" href="../../kr/AdvancedManual/AD_ReversedRiggedMesh.html">리깅된 메시의 크기가 반전된 경우 ></a>
    </nav>
    
    <!-- 페이지 내용 끝! -->

    
    <!-- 종료 -->
    </div>

    <!-- 부트스트랩 -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script type="text/javascript" src="../../js/bootstrap.js"></script>
    <!--------------->

    </body>
</html>
