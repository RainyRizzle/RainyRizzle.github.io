<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <!-- 제목 -->
        <title>타임라인과 연동하기</title>
        <!-- 파비콘 -->
        <link rel="shortcut icon" href="../../Images/favicon.ico"/>
        <!-- 부트스트랩 -->
        <link rel="stylesheet" href="../../css/bootstrap.css">
        <!--------------->

    </head>

    <body>
        <p>
            <nav class="navbar sticky-top navbar-expand-lg navbar-dark bg-dark">
            <!--로고 : AnyPortrait 홈페이지로 가야한다. (언어별)-->
            <a class="navbar-brand" href="https://www.rainyrizzle.com/anyportrait-kor">
                <img src="../../Images/AP_Logo.png" width="150" height="30" class="d-inline-block align-top" alt="">
            </a>

            <!--메뉴들 : 현재 페이지의 카테고리에 active 붙인다. (언어별 링크) -->
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarText">
                <ul class="navbar-nav mr-auto">
                <li class="nav-item">
                    <a class="nav-link" href="../../kr/GettingStarted.html">시작하기</a>
                </li>
                <li class="nav-item active">
                    <a class="nav-link" href="../../kr/AdManual.html">메뉴얼</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="../../kr/Script.html">스크립트</a>
                </li>

                </ul>

                <!-- 언어 변경. 현재 페이지의 주소에서 언어 주소만 변경한다. (해당 언어에 active) -->
                <div class="btn-group mr-2" role="group" aria-label="Basic example">
                    <a role="button" class="btn btn-secondary" href="../../en/AdvancedManual/AD_Timeline.html">EN</a>
                    <a role="button" class="btn btn-secondary active" href="../../kr/AdvancedManual/AD_Timeline.html">KR</a>
                    <a role="button" class="btn btn-secondary" href="../../jp/AdvancedManual/AD_Timeline.html">JP</a>
                </div>

                <!-- 여백 -->
                <p></p>

                <!-- 검색버튼 -->
                <form class="form-inline">
                    <a class="btn btn-light" role="button" href="../../kr/Search.html">검색</a>
                </form>
            </div>
        </nav>
    </p>

    <!-- 실제 바디 부분 -->
    <div class="container">
    <!-- 여기에 내용을 적어주세요 -->

    <!-- 여기서부터 페이지 내용이 작성됩니다. -->
    <!-- 1. 페이지 진입 경로 -->
    <p><a href="https://www.rainyrizzle.com/anyportrait-kor"><span class="text-dark">AnyPortrait</span></a> > <a href="../../kr/AdManual.html"><span class="text-dark">메뉴얼</span></a> > 타임라인과 연동하기</p>
    
    <!-- 2. 페이지 메인 타이틀 -->
    <h1 class="display-5">타임라인과 연동하기</h1>
    <br>
    
    <!-- 4. 버전 설명 -->
    <h4><span class="badge badge-secondary">1.1.6</span></h4>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_490.jpg"/>
    <br>
    
    <p>
    유니티의 <strong>타임라인(Timeline)</strong>은 게임 중에 재생되는 시네마틱 화면을 만드는 기능입니다.<br>
    기존의 애니메이션과 다른 시퀸스 툴을 이용하여 애니메이션을 조합하고 제어할 수 있습니다.<br>
    유니티의 홈페이지에서 타임라인에 관한 설명을 볼 수 있습니다. (<a href="https://docs.unity3d.com/Manual/TimelineSection.html" target="_sub">관련 페이지</a>)<br>
    AnyPortrait는 v1.1.6부터 유니티의 타임라인과 연동하는 기능을 제공합니다.<br>
    </p>
    <br>
    
    <!-- 3. 서브 타이틀 -->
    <h3>Playable Director와 Timeline Asset 만들고 트랙 연결하기</h3>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_491.jpg"/>
    <br>
    
    <p>
    타임라인은 메카님과 관련이 있는 기능입니다.<br>
    따라서 AnyPortrait의 메카님 설정을 켜야 합니다.<br>
    <strong>(1)</strong> <strong>Bake 버튼</strong>을 누릅니다.<br>
    <strong>(2)</strong> <strong>Setting 탭</strong>을 선택합니다.<br>
    <strong>(3)</strong> <strong>메카님 설정</strong>을 켜고 애니메이션 클립이 저장될 경로를 설정합니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_492.jpg"/>
    <br>
    
    <p>
    <strong>(4)</strong> <strong>Bake 탭</strong>을 선택합니다.<br>
    <strong>(5)</strong> <strong>Bake 버튼</strong>을 누릅니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_493.jpg"/>
    <br>
    
    <p>
    캐릭터에 <strong>Animator</strong>가 추가된 것을 볼 수 있습니다.<br>
    또한 애니메이션 클립들이 생성된 상태입니다.<br>
    이 애니메이션 클립들을 이용하여 타임라인을 구성할 수 있습니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_494.jpg"/>
    <br>
    
    <p>
    타임라인을 만들어봅시다.<br>
    <strong>(1)</strong> <strong>새로운 GameObject</strong>를 생성합니다. 여기서는 "Director"라는 이름으로 생성했습니다.<br>
    <strong>(2)</strong> 생성된 GameObject에 <strong>Playable Director 컴포넌트</strong>를 추가합니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_495.jpg"/>
    <br>
    
    <p>
    <strong>Window &gt; Sequencing &gt; Timeline</strong> 메뉴로 타임라인 에디터를 엽니다.<br>
    (유니티 버전에 따라 메뉴가 다를 수 있습니다.)<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_496.jpg"/>
    <br>
    
    <p>
    타임라인 에디터가 열렸습니다.<br>
    <strong>(1)</strong> Playable Director 컴포넌트가 추가된 <strong>Director</strong>를 선택합니다.<br>
    <strong>(2)</strong> 타임라인 에디터에서 <strong>Create 버튼</strong>을 눌러서 <strong>Timeline Asset</strong>을 생성합니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_497.jpg"/>
    <br>
    
    <p>
    Timeline Asset이 생성되어 이제 타임라인을 편집할 준비가 되었습니다. <br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_498.jpg"/>
    <br>
    
    <p>
    AnyPortrait로 제작된 캐릭터(Runner)가 다른 GameObject(Player)의 자식 객체가 되도록 만듭니다.<br>
    메카님을 연동하는 경우 로컬 좌표가 (0, 0, 0)으로 강제되기 때문에 이렇게 별도의 GameObject를 만드는 것이 좋습니다.<br>
    타임라인 연동시에도 별도의 부모 GameObject를 만들고, 부모 GameObject의 Transform을 제어하는 것을 권장합니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_499.jpg"/>
    <br>
    
    <p>
    타임라인 에디터에서 <strong>Add 버튼</strong>을 누르고 <strong>Animation Track</strong>을 추가합니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_500.jpg"/>
    <br>
    
    <p>
    추가된 트랙을 AnyPortrait와 연동해봅시다.<br>
    <strong>(1)</strong> AnyPortrait의 캐릭터와 연동될 <strong>트랙을 선택</strong>합니다.<br>
    <strong>(2)</strong> <strong>트랙의 이름</strong>을 지정합니다. 여기서는 "Runner Anim Track"으로 설정했습니다.<br>
    AnyPortrait는 "트랙의 이름"으로 연동될 트랙을 구분하므로, 이때 설정한 이름을 기억해둡시다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_501.jpg"/>
    <br>
    
    <p>
    이번엔 캐릭터를 움직이는 트랙을 만들어봅시다.<br>
    <strong>(1)</strong> 앞서 만든 캐릭터의 <strong>부모 GameObject인 "Player"</strong>를 <strong>(2)</strong> <strong>타임라인의 트랙 리스트로 드래그&드롭</strong>합니다.<br>
    <strong>(3)</strong> <strong>Player에 대한 트랙</strong>이 추가되었습니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_502.jpg"/>
    <br>
    
    <p>
    <strong>(1)</strong> <strong>AnyPortrait 캐릭터를 선택</strong>합니다.<br>
    <strong>(2)</strong> Inspector 화면에서 Timeline Settings 항목의 <strong>Track Data의 Size를 1로 설정</strong>합니다.<br>
    <strong>(3)</strong> <strong>Director 항목</strong>에 <strong>Playable Director</strong>가 있는 Director를 연결합니다.<br>
    <strong>(4)</strong> <strong>Track Name 항목</strong>에 앞서 만든 <strong>트랙의 이름("Runner Anim Track")</strong>을 지정합니다. <br>
    </p>
    <br>
    
    <!-- 12. 참고 박스 시작 -->
    <div class="alert alert-info" role="alert">
    
    <!-- 3. 서브 타이틀(참고 박스) -->
    <h4>타임라인의 트랙과의 연동 설정에 관하여</h4>
    <br>
    
    <p>
    Inspector 화면에서 타임라인의 트랙과 연동할 수 있으며, 이때 다음의 특징이 있습니다.<br>
    <strong>1) 다중 레이어</strong><br>
    동일한 Playable Director에 2개 이상의 트랙을 연결하면 여러 개의 애니메이션 레이어가 지정된 것과 동일합니다.<br>
    Layer와 Blend의 값을 변경하여 다중 레이어의 혼합 순서와 방식을 설정할 수 있습니다.<br>
    </p>
    <br>
    
    <p>
    <strong>2) 다수의 Playable Director 지정</strong><br>
    씬에 여러 개의 Playable Director가 있다면, Track Data에 모두 추가하면 됩니다.<br>
    현재 재생되는 Playable Director에 대해서만 자동으로 연동이 됩니다.<br>
    만약 모든 Playable Director의 재생이 완료된다면 AnyPortrait의 캐릭터는 타임라인 대신 메카님의 Animator의 제어를 받습니다.<br>
    </p>
    <br>
    
    <p>
    <strong>3) 스크립트로 Track Data 추가하거나 제거하기</strong><br>
    스크립트를 이용하여 게임이 실행되는 중에 Playable Director와 연결할 수 있습니다.<br>
    v1.1.6부터 제공되는 다음의 함수들을 이용해보시길 바랍니다.<br>
    (자세한 설명은 <a href="../../kr/Script/SC_Timeline.html">관련 페이지</a>를 참고하세요.)<br>
    </p>
    <br>
    
    <p>
    public bool <strong>AddTimelineTrack</strong>(  UnityEngine.Playables.PlayableDirector playableDirector, string trackName, int layer, apAnimPlayUnit.BLEND_METHOD blendMethod)<br>
    : Playable Director의 트랙과 연결합니다.<br>
    트랙의 이름과 레이어 정보를 입력해야하며, 유효한 트랙이 아닌 경우 false를 리턴합니다.<br>
    </p>
    <br>
    
    <p>
    public void <strong>RemoveInvalidTimelineTracks</strong><strong>()</strong><br>
    : 유효하지 않은 모든 트랙 정보를 삭제합니다.<br>
    </p>
    <br>
    
    <p>
    public void <strong>RemoveAllTimelineTracks</strong><strong>()</strong><br>
    : 모든 트랙 정보를 삭제합니다.<br>
    </p>
    <br>
    
    <p>
    public void <strong>UnlinkTimelinePlayableDirector</strong>(UnityEngine.Playables.PlayableDirector playableDirector)<br>
    : 입력된 Playable Director와의 연결을 해제합니다.<br>
    </p>
    <br>
    
    <p>
    public void <strong>SetTimelineEnable</strong>(bool isEnabled)<br>
    : 트랙 정보와 상관없이 타임라인의 제어를 받을지 여부를 설정합니다.<br>
    </p>
    <br>
    
    </div>
    <br>
    <br>
    
    <!-- 3. 서브 타이틀 -->
    <h3>애니메이션 클립 배치하고 캐릭터 움직이기</h3>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_503.jpg"/>
    <br>
    
    <p>
    트랙과 연동이 되었다면 이제 애니메이션 클립을 타임라인에 배치해봅시다.<br>
    메카님 설정을 켜고 Bake를 했다면 애니메이션이 Animation Clip Asset으로 저장됩니다.<br>
    트랙에 이 애니메이션 클립들을 드래그하여 배치하면 됩니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_504.jpg"/>
    <br>
    
    <p>
    게임을 실행하면 타임라인이 재생되면서 캐릭터의 애니메이션도 같이 순서대로 재생되는 것을 볼 수 있습니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_505.jpg"/>
    <br>
    
    <p>
    캐릭터를 실제로 움직이고 싶다면, 부모 GameObject가 등록된 다른 트랙에서 애니메이션을 만들어야 합니다.<br>
    <strong>(1)</strong> 트랙의 <strong>녹화 버튼</strong>을 누릅니다.<br>
    <strong>(2)</strong> 부모 GameObject인 <strong>"Player"를 선택</strong>합니다.<br>
    <strong>(3)</strong> 프레임에 맞게 각각 위치를 이동하여 <strong>키프레임들을 생성</strong>합니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_506.jpg"/>
    <br>
    
    <p>
    다시 게임을 실행하면, 캐릭터가 앞으로 이동하면서 애니메이션이 실행됩니다.<br>
    </p>
    <br>
    
    <!-- 3. 서브 타이틀 -->
    <h3>에디터에서 타임라인 미리보기</h3>
    <br>
    
    <p>
    이 단계까지 완료되었다면 게임 중에 타임라인에 따라서 애니메이션이 실행되는 것을 볼 수 있습니다.<br>
    그렇지만 게임이 실행 중이 아닐 때에는 타임라인이 재생되더라도 AnyPortrait의 캐릭터의 애니메이션이 재생되지 않습니다.<br>
    AnyPortrait는 에디터에서 자동으로 업데이트가 되지 않으며, 별도의 입력이 있는 경우에만 메시가 갱신되기 때문입니다.<br>
    이를 위해서 게임이 실행 중이 아닐 때에도 타임라인에 의해 재생되도록 별도의 스크립트가 v1.1.6부터 제공됩니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_507.jpg"/>
    <br>
    
    <p>
    <strong>apPortrait</strong>가 있는 AnyPortrait의 캐릭터를 선택하고 <strong>Add Component 버튼</strong>을 누릅니다.<br>
    <strong>AnyPortrait &gt; Timeline Simulator</strong>를 선택합니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_508.jpg"/>
    <br>
    
    <p>
    <strong>타임라인 시뮬레이터(apAnimPlayTimelineSimulator)</strong>가 컴포넌트로 추가되었습니다.<br>
    <strong>(1)</strong> <strong>작업 중인 Playable Director</strong>를 연결합니다.<br>
    </p>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_509.jpg"/>
    <br>
    
    <p>
    타임라인을 편집하는 도중에도 캐릭터의 애니메이션이 제대로 실행되는 것을 볼 수 있습니다.<br>
    </p>
    <br>
    
    <p>
    <span class="text-danger"><strong>타임라인 시뮬레이터의 속성 및 주의할 점</strong></span><br>
    - <strong>Simulate</strong>를 켜면 타임라인이 재생될 때 같이 연동되어 재생되며, 반대로 <strong>Simulate</strong>를 끄면 타임라인의 제어를 받지 않습니다.<br>
    - 애니메이션 클립을 추가하거나 제거할 때 <span class="text-primary"><strong>Refresh Tracks 버튼</strong></span>을 눌러야 갱신된 트랙 정보가 정상적으로 인식이 됩니다.<br>
    - <strong>타임라인 시뮬레이터</strong>는 타임라인 편집 중에만 동작하며, 게임이 실행되면 동작하지 않습니다.<br>
    - 타임라인이 완성되면 <span class="text-primary"><strong>타임라인 시뮬레이터 컴포넌트를 삭제</strong></span>하는 것을 권장합니다.<br>
    </p>
    <br>
    
    <!-- 3. 서브 타이틀 -->
    <h3>트랙에서의 애니메이션 클립 정보와 완성된 타임라인 시퀸스</h3>
    <br>
    
    <!-- 8. 이미지 (가운데 정렬) -->
    <br>
    <img class="img-fluid rounded-sm mx-auto d-block" style="max-width:80%;" src="../../Images/Advanced/AdManual_510.jpg"/>
    <br>
    
    <p>
    타임라인 트랙에 배치된 애니메이션 클립의 속성을 Inspector 화면에서 수정할 수 있습니다.<br>
    AnyPortrait는 "<strong>Clip In</strong>", "<strong>Speed Multiplier</strong>" 속성값을 애니메이션 재생에 반영합니다.<br>
    - <strong>Clip In</strong>을 변경하여<strong> </strong>애니메이션의 시작 시점을 변경할 수 있습니다.<br>
    - <strong>Speed Multiplier</strong>를 변경하여 애니메이션의 재생 속도를 제어할 수 있습니다.<br>
    </p>
    <br>
    
    
    <br><br>
    
    <!-- 11. 유튜브 영상 -->
    <div class="embed-responsive embed-responsive-16by9 mx-auto d-block" style="max-width: 60%;">
        <iframe class="embed-responsive-item" src="https://www.youtube.com/embed/IiWsuaY2R0A" allowfullscreen></iframe>
    </div>
    <br>
    
    
    <br><br>
    
    <!-- 5. 바닥 네비바 -->
    <br>
    <nav class="navbar fixed-bottom navbar-light bg-light">
        <a class="btn btn-light" role="button" href="../../kr/AdvancedManual/AD_Mecanim.html">< 메카님과 연동하기</a>
        <a class="btn btn-light" role="button" href="../../kr/AdvancedManual/AD_2DCanvas.html">유니티 2D 캔버스 이용하기 ></a>
    </nav>
    
    <!-- 페이지 내용 끝! -->

    
    <!-- 종료 -->
    </div>

    <!-- 부트스트랩 -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script type="text/javascript" src="../../js/bootstrap.js"></script>
    <!--------------->

    </body>
</html>
